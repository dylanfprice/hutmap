'use strict';angular.module("ui.bootstrap","ui.bootstrap.transition ui.bootstrap.collapse ui.bootstrap.accordion ui.bootstrap.alert ui.bootstrap.buttons ui.bootstrap.carousel ui.bootstrap.position ui.bootstrap.datepicker ui.bootstrap.dialog ui.bootstrap.dropdownToggle ui.bootstrap.modal ui.bootstrap.pagination ui.bootstrap.tooltip ui.bootstrap.popover ui.bootstrap.progressbar ui.bootstrap.rating ui.bootstrap.tabs ui.bootstrap.timepicker ui.bootstrap.typeahead".split(" "));
angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,c,e){function b(a){for(var b in a)if(void 0!==g.style[b])return a[b]}var d=function(b,g,f){f=f||{};var l=a.defer(),k=d[f.animation?"animationEndEventName":"transitionEndEventName"],m=function(){e.$apply(function(){b.unbind(k,m);l.resolve(b)})};k&&b.bind(k,m);c(function(){angular.isString(g)?b.addClass(g):angular.isFunction(g)?g(b):angular.isObject(g)&&b.css(g);k||l.resolve(b)});l.promise.cancel=
function(){k&&b.unbind(k,m);l.reject("Transition cancelled")};return l.promise},g=document.createElement("trans");d.transitionEndEventName=b({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"});d.animationEndEventName=b({WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"});return d}]);
angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var c=function(a,b,c){b.removeClass("collapse");b.css({height:c});b.addClass("collapse")};return{link:function(e,b,d){var g,h=!0;e.$watch(function(){return b[0].scrollHeight},function(){0!==b[0].scrollHeight&&(g||(h?c(e,b,b[0].scrollHeight+"px"):c(e,b,"auto")))});e.$watch(d.collapse,function(a){a?(g=!0,h?(h=!1,c(e,b,0)):(c(e,b,b[0].scrollHeight+"px"),f({height:"0"}))):(h?(h=!1,g||c(e,
b,"auto")):f({height:b[0].scrollHeight+"px"}).then(function(){g||c(e,b,"auto")}),g=!1)});var j,f=function(c){j&&j.cancel();j=a(b,c);j.then(function(){j=void 0},function(){j=void 0});return j}}}}]);
angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,c,e){this.groups=[];this.closeOthers=function(b){(angular.isDefined(c.closeOthers)?a.$eval(c.closeOthers):e.closeOthers)&&angular.forEach(this.groups,function(a){a!==b&&(a.isOpen=!1)})};this.addGroup=function(a){var c=this;this.groups.push(a);a.$on("$destroy",function(){c.removeGroup(a)})};this.removeGroup=
function(a){-1!==this.groups.indexOf(a)&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=
function(a){this.heading=a}}],link:function(c,e,b,d){var g,h;d.addGroup(c);c.isOpen=!1;b.isOpen&&(g=a(b.isOpen),h=g.assign,c.$watch(function(){return g(c.$parent)},function(a){c.isOpen=a}),c.isOpen=g?g(c.$parent):!1);c.$watch("isOpen",function(a){a&&d.closeOthers(c);h&&h(c.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,c,e){return function(a,c,g,h){h.setHeading(e(a,function(){}))}}}}).directive("accordionTransclude",
function(){return{require:"^accordionGroup",link:function(a,c,e,b){a.$watch(function(){return b[e.accordionTransclude]},function(a){a&&(c.html(""),c.append(a))})}}});angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(a,c,e){a.closeable="close"in e}}});
angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var c=a.activeClass||"active",e=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,g,h){h.$render=function(){d.toggleClass(c,angular.equals(h.$modelValue,a.$eval(g.btnRadio)))};d.bind(e,function(){d.hasClass(c)||a.$apply(function(){h.$setViewValue(a.$eval(g.btnRadio));h.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",
function(a){var c=a.activeClass||"active",e=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,g,h){function j(){var c=a.$eval(g.btnCheckboxTrue);return angular.isDefined(c)?c:!0}function f(){var c=a.$eval(g.btnCheckboxFalse);return angular.isDefined(c)?c:!1}h.$render=function(){d.toggleClass(c,angular.equals(h.$modelValue,j()))};d.bind(e,function(){a.$apply(function(){h.$setViewValue(d.hasClass(c)?f():j());h.$render()})})}}}]);
angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,c,e){function b(){function d(){f?(a.next(),b()):a.pause()}j&&c.cancel(j);var k=+a.interval;!isNaN(k)&&0<=k&&(j=c(d,k))}var d=this,g=d.slides=[],h=-1,j,f;d.currentSlide=null;d.select=function(f,k){function m(){if(d.currentSlide&&angular.isString(k)&&!a.noTransition&&f.$element){f.$element.addClass(k);f.$element.attr("offsetWidth",f.$element[0].offsetWidth);
angular.forEach(g,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})});angular.extend(f,{direction:k,active:!0,entering:!0});angular.extend(d.currentSlide||{},{direction:k,leaving:!0});a.$currentTransition=e(f.$element,{});var c=f,m=d.currentSlide;a.$currentTransition.then(function(){q(c,m)},function(){q(c,m)})}else q(f,d.currentSlide);d.currentSlide=f;h=n;b()}function q(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1});angular.extend(c||{},{direction:"",
active:!1,leaving:!1,entering:!1});a.$currentTransition=null}var n=g.indexOf(f);void 0===k&&(k=n>h?"next":"prev");f&&f!==d.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),c(m)):m())};d.indexOfSlide=function(a){return g.indexOf(a)};a.next=function(){var b=(h+1)%g.length;if(!a.$currentTransition)return d.select(g[b],"next")};a.prev=function(){var b=0>h-1?g.length-1:h-1;if(!a.$currentTransition)return d.select(g[b],"prev")};a.select=function(a){d.select(a)};a.isActive=function(a){return d.currentSlide===
a};a.slides=function(){return g};a.$watch("interval",b);a.play=function(){f||(f=!0,b())};a.pause=function(){a.noPause||(f=!1,j&&c.cancel(j))};d.addSlide=function(b,c){b.$element=c;g.push(b);1===g.length||b.active?(d.select(g[g.length-1]),1==g.length&&a.play()):b.active=!1};d.removeSlide=function(a){var b=g.indexOf(a);g.splice(b,1);0<g.length&&a.active?b>=g.length?d.select(g[b-1]):d.select(g[b]):h>b&&h--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",
require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(c,e,b,d){if(b.active){var g=a(b.active),h=g.assign,j=c.active=g(c.$parent);c.$watch(function(){var a=g(c.$parent);a!==c.active&&(a!==j?j=c.active=a:h(c.$parent,a=j=c.active));return a})}d.addSlide(c,e);c.$on("$destroy",
function(){d.removeSlide(c)});c.$watch("active",function(a){a&&d.select(c)})}}}]);
angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,c){function e(a){a=a.currentStyle?a.currentStyle.position:c.getComputedStyle?c.getComputedStyle(a).position:a.style.position;return"static"===(a||"static")}var b,d;a.bind("mousemove",function(a){b=a.pageX;d=a.pageY});return{position:function(b){var c=this.offset(b),d={top:0,left:0},f;f=a[0];for(var l=b[0].offsetParent||f;l&&l!==f&&e(l);)l=l.offsetParent;f=l||f;f!=a[0]&&(d=this.offset(angular.element(f)),
d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);return{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(b){var d=b[0].getBoundingClientRect();return{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:d.top+(c.pageYOffset||a[0].body.scrollTop),left:d.left+(c.pageXOffset||a[0].body.scrollLeft)}},mouse:function(){return{x:b,y:d}}}}]);
angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,c,e,b){function d(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function g(a,b,c,f){return{date:a,label:e(a,
b),selected:!!c,secondary:!!f}}var h=d(c.dayFormat,b.dayFormat),j=d(c.monthFormat,b.monthFormat),f=d(c.yearFormat,b.yearFormat),l=d(c.dayHeaderFormat,b.dayHeaderFormat),k=d(c.dayTitleFormat,b.dayTitleFormat),m=d(c.monthTitleFormat,b.monthTitleFormat),q=d(c.startingDay,b.startingDay),n=d(c.yearRange,b.yearRange);this.minDate=b.minDate?new Date(b.minDate):null;this.maxDate=b.maxDate?new Date(b.maxDate):null;this.modes=[{name:"day",getVisibleDates:function(a,b){var c=a.getFullYear(),f=a.getMonth(),d=
new Date(c,f,1),m=q-d.getDay(),n=0<m?7-m:-m,m=new Date(d),d=0;0<n&&(m.setDate(-n+1),d+=n);for(var d=d+(new Date(c,f+1,0)).getDate(),n=d+=(7-d%7)%7,c=Array(n),j=0;j<n;)c[j++]=new Date(m),m.setDate(m.getDate()+1);m=Array(7);for(n=0;n<d;n++)j=new Date(c[n]),c[n]=g(j,h,b&&b.getDate()===j.getDate()&&b.getMonth()===j.getMonth()&&b.getFullYear()===j.getFullYear(),j.getMonth()!==f);for(f=0;7>f;f++)m[f]=e(c[f].date,l);return{objects:c,title:e(a,k),labels:m}},compare:function(a,b){return new Date(a.getFullYear(),
a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var c=Array(12),d=a.getFullYear(),f=0;12>f;f++)c[f]=g(new Date(d,f,1),j,b&&b.getMonth()===f&&b.getFullYear()===d);return{objects:c,title:e(a,m)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=Array(n),d=a.getFullYear(),
d=parseInt((d-1)/n,10)*n+1,k=0;k<n;k++){var e=new Date(d+k,0,1);c[k]=g(e,f,b&&b.getFullYear()===e.getFullYear())}return{objects:c,title:[c[0].label,c[n-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:n}}];this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&0>d.compare(b,this.minDate)||this.maxDate&&0<d.compare(b,this.maxDate)||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter",
"$parse","datepickerConfig","$log",function(a,c,e,b){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,g,h,j){function f(){a.showWeekNumbers=0===q&&t}function l(c){var f=null,e=!0;m.$modelValue&&(f=new Date(m.$modelValue),isNaN(f)?(e=!1,b.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):
c&&(n=f));m.$setValidity("date",e);var l=k.modes[q];c=l.getVisibleDates(n,f);angular.forEach(c.objects,function(a){a.disabled=k.isDisabled(a.date,q)});m.$setValidity("date-disabled",!f||!k.isDisabled(f));for(var f=a,e=c.objects,l=l.split,h=[];0<e.length;)h.push(e.splice(0,l));f.rows=h;a.labels=c.labels||[];a.title=c.title}var k=j[0],m=j[1];if(m){var q=0,n=new Date,t=e.showWeeks;h.showWeeks?a.$parent.$watch(c(h.showWeeks),function(a){t=!!a;f()}):f();h.min&&a.$parent.$watch(c(h.min),function(a){k.minDate=
a?new Date(a):null;l()});h.max&&a.$parent.$watch(c(h.max),function(a){k.maxDate=a?new Date(a):null;l()});m.$render=function(){l(!0)};a.select=function(a){if(0===q){var b=new Date(m.$modelValue);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());m.$setViewValue(b);l(!0)}else n=a,q-=1,f(),l()};a.move=function(a){var b=k.modes[q].step;n.setMonth(n.getMonth()+a*(b.months||0));n.setFullYear(n.getFullYear()+a*(b.years||0));l()};a.toggleMode=function(){q=(q+1)%k.modes.length;f();l()};a.getWeekNumber=
function(b){if(0===q&&a.showWeekNumbers&&7===b.length){b=new Date(b[0].date);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();b.setMonth(0);b.setDate(1);b=Math.floor(Math.round((c-b)/864E5)/7)+1}else b=null;return b}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",closeOnDateSelection:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig",function(a,c,e,b,d,g){return{restrict:"EA",require:"ngModel",link:function(h,
j,f,l){function k(a){if(a){var b=new Date(a);if(!isNaN(b))return b}return a}function m(a){v?v(h,!!a):p.isOpen=!!a}function q(a,b,f){a&&(h.$watch(c(a),function(a){p[b]=a}),r.attr(f||b,b))}function n(){p.position=b.position(j);p.position.top+=j.prop("offsetHeight")}var t=angular.isDefined(f.closeOnDateSelection)?p.$eval(f.closeOnDateSelection):g.closeOnDateSelection,u=f.datepickerPopup||g.dateFormat,p=h.$new();h.$on("$destroy",function(){p.$destroy()});l.$formatters.push(function(a){return a?d(a,u):
null});l.$parsers.push(k);var s,v;f.open&&(s=c(f.open),v=s.assign,h.$watch(s,function(a){p.isOpen=!!a}));p.isOpen=s?s(h):!1;var w=function(a){p.isOpen&&a.target!==j[0]&&p.$apply(function(){m(!1)})},A=function(){p.$apply(function(){m(!0)})};s=angular.element("<datepicker-popup-wrap><datepicker></datepicker></datepicker-popup-wrap>");s.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=s.find("datepicker");f.datepickerOptions&&r.attr(angular.extend({},h.$eval(f.datepickerOptions)));var x=
c(f.ngModel).assign;p.dateSelection=function(){x(h,p.date);t&&m(!1)};p.$watch(function(){return l.$modelValue},function(a){if(angular.isString(a)){var b=k(a);if(a&&!b)throw x(h,null),Error(a+" cannot be parsed to a date object.");a=b}p.date=a;n()});q(f.min,"min");q(f.max,"max");f.showWeeks?q(f.showWeeks,"showWeeks","show-weeks"):(p.showWeeks=!0,r.attr("show-weeks","showWeeks"));f.dateDisabled&&r.attr("date-disabled",f.dateDisabled);p.$watch("isOpen",function(a){a?(n(),e.bind("click",w),j.unbind("focus",
A),j[0].focus()):(e.unbind("click",w),j.bind("focus",A));v&&v(h,a)});p.today=function(){x(h,new Date)};p.clear=function(){x(h,null)};j.after(a(s)(p))}}}]).directive("datepickerPopupWrap",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,c){c.bind("click",function(a){a.preventDefault();a.stopPropagation()})}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);
dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(a,c,e){a.title=e.title;a.message=e.message;a.buttons=e.buttons;a.close=function(a){c.close(a)}}]);
dialogModule.provider("$dialog",function(){var a={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},c={},e=0;this.options=function(a){c=a};this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(b,d,g,h,j,f,l,k,m){function q(a){var b=angular.element("<div>");b.addClass(a);return b}function n(b){var f=this;
b=this.options=angular.extend({},a,c,b);this._open=!1;this.backdropEl=q(b.backdropClass);b.backdropFade&&(this.backdropEl.addClass(b.transitionClass),this.backdropEl.removeClass(b.triggerClass));this.modalEl=q(b.dialogClass);b.dialogFade&&(this.modalEl.addClass(b.transitionClass),this.modalEl.removeClass(b.triggerClass));this.handledEscapeKey=function(a){27===a.which&&(f.close(),a.preventDefault(),f.$scope.$apply())};this.handleBackDropClick=function(a){f.close();a.preventDefault();f.$scope.$apply()}}
var t=d.find("body");n.prototype.isOpen=function(){return this._open};n.prototype.open=function(a,b){var c=this,f=this.options;a&&(f.templateUrl=a);b&&(f.controller=b);if(!f.template&&!f.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");this._loadResolves().then(function(a){var b=a.$scope=c.$scope=a.$scope?a.$scope:h.$new();c.modalEl.html(a.$template);c.options.controller&&(a=j(c.options.controller,a),c.modalEl.children().data("ngControllerController",
a));g(c.modalEl)(b);c._addElementsToDom();setTimeout(function(){c.options.dialogFade&&c.modalEl.addClass(c.options.triggerClass);c.options.backdropFade&&c.backdropEl.addClass(c.options.triggerClass)});c._bindEvents()});this.deferred=l.defer();return this.deferred.promise};n.prototype.close=function(a){function b(a){a.removeClass(f.options.triggerClass)}function c(){f._open&&f._onCloseComplete(a)}var f=this,d=this._getFadingElements();if(0<d.length)for(var e=d.length-1;0<=e;e--)k(d[e],b).then(c);else this._onCloseComplete(a)};
n.prototype._getFadingElements=function(){var a=[];this.options.dialogFade&&a.push(this.modalEl);this.options.backdropFade&&a.push(this.backdropEl);return a};n.prototype._bindEvents=function(){this.options.keyboard&&t.bind("keydown",this.handledEscapeKey);this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)};n.prototype._unbindEvents=function(){this.options.keyboard&&t.unbind("keydown",this.handledEscapeKey);this.options.backdrop&&this.options.backdropClick&&
this.backdropEl.unbind("click",this.handleBackDropClick)};n.prototype._onCloseComplete=function(a){this._removeElementsFromDom();this._unbindEvents();this.deferred.resolve(a)};n.prototype._addElementsToDom=function(){t.append(this.modalEl);this.options.backdrop&&(0===e&&t.append(this.backdropEl),e++);this._open=!0};n.prototype._removeElementsFromDom=function(){this.modalEl.remove();this.options.backdrop&&(e--,0===e&&this.backdropEl.remove());this._open=!1};n.prototype._loadResolves=function(){var a=
[],c=[],d,k=this;this.options.template?d=l.when(this.options.template):this.options.templateUrl&&(d=b.get(this.options.templateUrl,{cache:f}).then(function(a){return a.data}));angular.forEach(this.options.resolve||[],function(b,f){c.push(f);a.push(angular.isString(b)?m.get(b):m.invoke(b))});c.push("$template");a.push(d);return l.all(a).then(function(a){var b={};angular.forEach(a,function(a,f){b[c[f]]=a});b.dialog=k;return b})};return{dialog:function(a){return new n(a)},messageBox:function(a,b,c){return new n({templateUrl:"template/dialog/message.html",
controller:"MessageBoxController",resolve:{model:function(){return{title:a,message:b,buttons:c}}}})}}}]});
angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var c=null,e=angular.noop;return{restrict:"CA",link:function(b,d){b.$watch("$location.path",function(){e()});d.parent().bind("click",function(){e()});d.bind("click",function(b){var h=d===c;b.preventDefault();b.stopPropagation();c&&e();h||(d.parent().addClass("open"),c=d,e=function(b){b&&(b.preventDefault(),b.stopPropagation());a.unbind("click",e);d.parent().removeClass("open");e=angular.noop;
c=null},a.bind("click",e))})}}}]);
angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(a,c){return{restrict:"EA",terminal:!0,link:function(e,b,d){var g=angular.extend({},e.$eval(d.uiOptions||d.bsOptions||d.options)),h=d.modal||d.show,j,g=angular.extend(g,{template:b.html(),resolve:{$scope:function(){return e}}}),f=c.dialog(g);b.remove();j=d.close?function(){a(d.close)(e)}:function(){angular.isFunction(a(h).assign)&&a(h).assign(e,!1)};e.$watch(h,function(a){a?f.open().then(function(){j()}):
f.isOpen()&&f.close()})}}}]);
angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$interpolate",function(a,c){this.currentPage=1;this.noPrevious=function(){return 1===this.currentPage};this.noNext=function(){return this.currentPage===a.numPages};this.isActive=function(a){return this.currentPage===a};this.reset=function(){a.pages=[];this.currentPage=parseInt(a.currentPage,10);this.currentPage>a.numPages&&a.selectPage(a.numPages)};var e=this;a.selectPage=function(b){!e.isActive(b)&&(0<b&&b<=
a.numPages)&&(a.currentPage=b,a.onSelectPage({page:b}))};this.getAttributeValue=function(b,d,e){return angular.isDefined(b)?e?c(b)(a.$parent):a.$parent.$eval(b):d}}]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["paginationConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",
replace:!0,link:function(c,e,b,d){function g(a,b,c,f){return{number:a,text:b,active:c,disabled:f}}var h=d.getAttributeValue(b.boundaryLinks,a.boundaryLinks),j=d.getAttributeValue(b.directionLinks,a.directionLinks),f=d.getAttributeValue(b.firstText,a.firstText,!0),l=d.getAttributeValue(b.previousText,a.previousText,!0),k=d.getAttributeValue(b.nextText,a.nextText,!0),m=d.getAttributeValue(b.lastText,a.lastText,!0),q=d.getAttributeValue(b.rotate,a.rotate);c.$watch("numPages + currentPage + maxSize",
function(){d.reset();var a=1,b=c.numPages,e=angular.isDefined(c.maxSize)&&c.maxSize<c.numPages;e&&(q?(a=Math.max(d.currentPage-Math.floor(c.maxSize/2),1),b=a+c.maxSize-1,b>c.numPages&&(b=c.numPages,a=b-c.maxSize+1)):(a=(Math.ceil(d.currentPage/c.maxSize)-1)*c.maxSize+1,b=Math.min(a+c.maxSize-1,c.numPages)));for(var p=a;p<=b;p++){var s=g(p,p,d.isActive(p),!1);c.pages.push(s)}e&&!q&&(1<a&&(a=g(a-1,"...",!1,!1),c.pages.unshift(a)),b<c.numPages&&(b=g(b+1,"...",!1,!1),c.pages.push(b)));j&&(b=g(d.currentPage-
1,l,!1,d.noPrevious()),c.pages.unshift(b),b=g(d.currentPage+1,k,!1,d.noNext()),c.pages.push(b));h&&(b=g(1,f,!1,d.noPrevious()),c.pages.unshift(b),b=g(c.numPages,m,!1,d.noNext()),c.pages.push(b))})}}}]).constant("pagerConfig",{previousText:"\u00ab Previous",nextText:"Next \u00bb",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,
link:function(c,e,b,d){function g(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:f&&d,next:f&&e}}var h=d.getAttributeValue(b.previousText,a.previousText,!0),j=d.getAttributeValue(b.nextText,a.nextText,!0),f=d.getAttributeValue(b.align,a.align);c.$watch("numPages + currentPage",function(){d.reset();var a=g(d.currentPage-1,h,d.noPrevious(),!0,!1);c.pages.unshift(a);a=g(d.currentPage+1,j,d.noNext(),!1,!0);c.pages.push(a)})}}}]);
angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){var a={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},e={};this.options=function(a){angular.extend(e,a)};this.setTriggers=function(a){angular.extend(c,a)};this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(b,d,g,h,j,f,l){return function(b,m,q){function n(a){a=a||t.trigger||q;return{show:a,hide:c[a]||a}}var t=
angular.extend({},a,e),u;u=b.replace(/[A-Z]/g,function(a,b){return(b?"-":"")+a.toLowerCase()});var p=l.startSymbol(),s=l.endSymbol(),v="<"+u+'-popup title="'+p+"tt_title"+s+'" content="'+p+"tt_content"+s+'" placement="'+p+"tt_placement"+s+'" animation="tt_animation()" is-open="tt_isOpen"></'+u+"-popup>";return{restrict:"EA",scope:!0,link:function(a,c,e){function l(){a.tt_isOpen?p():q()}function q(){a.tt_popupDelay?G=g(u,a.tt_popupDelay):a.$apply(u)}function p(){a.$apply(function(){s()})}function u(){var b,
d,k;if(a.tt_content){D&&g.cancel(D);y.css({top:0,left:0,display:"block"});B?(E=E||j.find("body"),E.append(y)):c.after(y);b=B?f.offset(c):f.position(c);d=y.prop("offsetWidth");k=y.prop("offsetHeight");switch(a.tt_placement){case "mouse":b=f.mouse();b={top:b.y,left:b.x};break;case "right":b={top:b.top+b.height/2-k/2,left:b.left+b.width};break;case "bottom":b={top:b.top+b.height,left:b.left+b.width/2-d/2};break;case "left":b={top:b.top+b.height/2-k/2,left:b.left-d};break;default:b={top:b.top-k,left:b.left+
b.width/2-d/2}}b.top+="px";b.left+="px";y.css(b);a.tt_isOpen=!0}}function s(){a.tt_isOpen=!1;g.cancel(G);angular.isDefined(a.tt_animation)&&a.tt_animation()?D=g(function(){y.remove()},500):y.remove()}var y=d(v)(a),D,G,E,B=angular.isDefined(t.appendToBody)?t.appendToBody:!1,z=n(void 0),H=!1;a.tt_isOpen=!1;e.$observe(b,function(b){a.tt_content=b});e.$observe(m+"Title",function(b){a.tt_title=b});e.$observe(m+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:t.placement});e.$observe(m+"Animation",
function(b){a.tt_animation=angular.isDefined(b)?h(b):function(){return t.animation}});e.$observe(m+"PopupDelay",function(b){b=parseInt(b,10);a.tt_popupDelay=!isNaN(b)?b:t.popupDelay});e.$observe(m+"Trigger",function(a){H&&(c.unbind(z.show,q),c.unbind(z.hide,p));z=n(a);z.show===z.hide?c.bind(z.show,l):(c.bind(z.show,q),c.bind(z.hide,p));H=!0});e.$observe(m+"AppendToBody",function(b){B=angular.isDefined(b)?h(b)(a):B});B&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&s()});a.$on("$destroy",
function(){a.tt_isOpen?s():y.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",
["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]);angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(a,c,e,b,d){return d("popover","popover","click")}]);
angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(a,c,e){var b=angular.isDefined(c.animate)?a.$eval(c.animate):e.animate,d=angular.isDefined(c.autoType)?a.$eval(c.autoType):e.autoType,g=angular.isDefined(c.stackedTypes)?a.$eval("["+c.stackedTypes+"]"):e.stackedTypes;this.makeBar=function(a,c,f){var e=
angular.isObject(a)?a.value:a||0;c=angular.isObject(c)?c.value:c||0;a=angular.isObject(a)&&angular.isDefined(a.type)?a.type:d?g[f||0]:null;return{from:c,to:e,type:a,animate:b}};this.addBar=function(b){a.bars.push(b);a.totalPercent+=b.to};this.clearBars=function(){a.bars=[];a.totalPercent=0};this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",
link:function(a,c,e,b){a.$watch("value",function(a,c){b.clearBars();if(angular.isArray(a))for(var e=0,j=a.length;e<j;e++)b.addBar(b.makeBar(a[e],c[e],e));else b.addBar(b.makeBar(a,c))},!0);a.$watch("totalPercent",function(b){if(100<=b)a.onFull();else if(0>=b)a.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(a){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(c,e){c.$watch("width",function(b){c.animate?
(e.css("width",c.old+"%"),a(e,{width:b+"%"})):e.css("width",b+"%")})}}}]);
angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(a,c){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},templateUrl:"template/rating/rating.html",replace:!0,link:function(e,b,d){b=angular.isDefined(d.max)?e.$parent.$eval(d.max):a.max;e.range=[];for(var g=1;g<=b;g++)e.range.push(g);e.rate=function(a){e.readonly||(e.value=a)};e.enter=function(a){e.readonly||(e.val=a);e.onHover({value:a})};e.reset=function(){e.val=
angular.copy(e.value);e.onLeave()};e.reset();e.$watch("value",function(a){e.val=a});e.readonly=!1;d.readonly&&e.$parent.$watch(c(d.readonly),function(a){e.readonly=!!a})}}}]);
angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md");}}).controller("TabsetController",["$scope","$element",function(a){var c=this,e=c.tabs=a.tabs=[];c.select=function(a){angular.forEach(e,function(a){a.active=!1});a.active=!0};c.addTab=function(a){e.push(a);(1===e.length||a.active)&&c.select(a)};
c.removeTab=function(a){var d=e.indexOf(a);a.active&&1<e.length&&c.select(e[d==e.length-1?d-1:d+1]);e.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,require:"^tabset",scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",compile:function(a,c,e){return function(a,c,g,h){a.vertical=angular.isDefined(g.vertical)?a.$eval(g.vertical):!1;a.type=angular.isDefined(g.type)?a.$parent.$eval(g.type):"tabs";a.direction=angular.isDefined(g.direction)?
a.$parent.$eval(g.direction):"top";a.tabsAbove="below"!=a.direction;h.$scope=a;h.$transcludeFn=e}}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(c,e,b){return function(c,e,h,j){var f;h.active?(e=a(h.active),f=e.assign,c.$parent.$watch(e,function(a){c.active=!!a}),c.active=
e(c.$parent)):f=e=angular.noop;c.$watch("active",function(a){f(c.$parent,a);if(a)j.select(c),c.onSelect();else c.onDeselect()});c.disabled=!1;h.disabled&&c.$parent.$watch(a(h.disabled),function(a){c.disabled=!!a});c.select=function(){c.disabled||(c.active=!0)};j.addTab(c);c.$on("$destroy",function(){j.removeTab(c)});c.active&&f(c.$parent,!0);c.$transcludeFn=b}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,c){a.$watch("headingElement",function(a){a&&
(c.html(""),c.append(a))})}}}]).directive("tabContentTransclude",["$compile","$parse",function(){return{restrict:"A",require:"^tabset",link:function(a,c,e){var b=a.$eval(e.tabContentTransclude);b.$transcludeFn(b.$parent,function(a){angular.forEach(a,function(a){a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())?b.headingElement=a:c.append(a)})})}}}]).directive("tabsetTitles",function(){return{restrict:"A",
require:"^tabset",templateUrl:"template/tabs/tabset-titles.html",replace:!0,link:function(a,c,e,b){a.$eval(e.tabsetTitles)?b.$transcludeFn(b.$scope.$parent,function(a){c.append(a)}):c.remove()}}});
angular.module("ui.bootstrap.timepicker",[]).filter("pad",function(){return function(a){angular.isDefined(a)&&2>a.toString().length&&(a="0"+a);return a}}).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["padFilter","$parse","timepickerConfig",function(a,c,e){return{restrict:"EA",require:"ngModel",replace:!0,templateUrl:"template/timepicker/timepicker.html",scope:{model:"=ngModel"},link:function(b,d,
g){function h(){var a=parseInt(b.hours,10);if(b.showMeridian?0<a&&13>a:0<=a&&24>a)return b.showMeridian&&(12===a&&(a=0),b.meridian===k[1]&&(a+=12)),a}function j(){var c=l.getHours();b.showMeridian&&(c=0===c||12===c?12:c%12);b.hours="h"===u?c:a(c);b.validHours=!0;c=l.getMinutes();b.minutes="m"===u?c:a(c);b.validMinutes=!0;b.meridian=b.showMeridian?12>l.getHours()?k[0]:k[1]:"";u=!1}function f(a){a=new Date(l.getTime()+6E4*a);l.setHours(a.getHours());l.setMinutes(a.getMinutes());b.model=new Date(l)}
var l=new Date,k=e.meridians,m=e.hourStep;g.hourStep&&b.$parent.$watch(c(g.hourStep),function(a){m=parseInt(a,10)});var q=e.minuteStep;g.minuteStep&&b.$parent.$watch(c(g.minuteStep),function(a){q=parseInt(a,10)});b.showMeridian=e.showMeridian;g.showMeridian&&b.$parent.$watch(c(g.showMeridian),function(a){b.showMeridian=!!a;if(b.model)j();else{a=new Date(l);var c=h();angular.isDefined(c)&&a.setHours(c);b.model=new Date(a)}});var n=d.find("input");d=n.eq(0);n=n.eq(1);if(angular.isDefined(g.mousewheel)?
b.$eval(g.mousewheel):e.mousewheel){var t=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||0<b};d.bind("mousewheel wheel",function(a){b.$apply(t(a)?b.incrementHours():b.decrementHours());a.preventDefault()});n.bind("mousewheel wheel",function(a){b.$apply(t(a)?b.incrementMinutes():b.decrementMinutes());a.preventDefault()})}var u=!1;b.readonlyInput=angular.isDefined(g.readonlyInput)?b.$eval(g.readonlyInput):e.readonlyInput;b.readonlyInput?(b.updateHours=
angular.noop,b.updateMinutes=angular.noop):(b.updateHours=function(){var a=h();angular.isDefined(a)?(u="h",null===b.model&&(b.model=new Date(l)),b.model.setHours(a)):(b.model=null,b.validHours=!1)},d.bind("blur",function(){b.validHours&&10>b.hours&&b.$apply(function(){b.hours=a(b.hours)})}),b.updateMinutes=function(){var a=parseInt(b.minutes,10);0<=a&&60>a?(u="m",null===b.model&&(b.model=new Date(l)),b.model.setMinutes(a)):(b.model=null,b.validMinutes=!1)},n.bind("blur",function(){b.validMinutes&&
10>b.minutes&&b.$apply(function(){b.minutes=a(b.minutes)})}));b.$watch(function(){return+b.model},function(a){!isNaN(a)&&0<a&&(l=new Date(a),j())});b.incrementHours=function(){f(60*m)};b.decrementHours=function(){f(60*-m)};b.incrementMinutes=function(){f(q)};b.decrementMinutes=function(){f(-q)};b.toggleMeridian=function(){f(720*(12>l.getHours()?1:-1))}}}}]);
angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var c=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(e){var b=e.match(c);if(!b)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.");return{itemName:b[3],source:a(b[4]),viewMapper:a(b[2]||b[1]),modelMapper:a(b[1])}}}}]).directive("typeahead",["$compile","$parse",
"$q","$timeout","$document","$position","typeaheadParser",function(a,c,e,b,d,g,h){var j=[9,13,27,38,40];return{require:"ngModel",link:function(f,l,k,m){var q=f.$eval(k.typeaheadMinLength)||1,n=f.$eval(k.typeaheadWaitMs)||0,t=!1!==f.$eval(k.typeaheadEditable),u=c(k.typeaheadLoading).assign||angular.noop,p=c(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?c(k.typeaheadInputFormatter):void 0,v=c(k.ngModel).assign,w=h.parse(k.typeahead),A=angular.element("<typeahead-popup></typeahead-popup>");A.attr({matches:"matches",
active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});angular.isDefined(k.typeaheadTemplateUrl)&&A.attr("template-url",k.typeaheadTemplateUrl);var r=f.$new();f.$on("$destroy",function(){r.$destroy()});var x=function(){r.matches=[];r.activeIdx=-1},F=function(a){var b={$viewValue:a};u(f,!0);e.when(w.source(r,b)).then(function(c){if(a===m.$viewValue){if(0<c.length){r.activeIdx=0;for(var k=r.matches.length=0;k<c.length;k++)b[w.itemName]=c[k],r.matches.push({label:w.viewMapper(r,
b),model:c[k]});r.query=a;r.position=g.position(l);r.position.top+=l.prop("offsetHeight")}else x();u(f,!1)}},function(){x();u(f,!1)})};x();r.query=void 0;var C;m.$parsers.push(function(a){x();a&&a.length>=q&&(0<n?(C&&b.cancel(C),C=b(function(){F(a)},n)):F(a));return t?a:void 0});m.$formatters.push(function(a){var b,c;b={};if(s)return b.$model=a,s(f,b);b[w.itemName]=a;b=w.viewMapper(f,b);c=w.viewMapper(f,{});return b!==c?b:a});r.select=function(a){var b={},c;b[w.itemName]=c=r.matches[a].model;a=w.modelMapper(f,
b);v(f,a);p(f,{$item:c,$model:a,$label:w.viewMapper(f,b)});x();l[0].focus()};l.bind("keydown",function(a){0===r.matches.length||-1===j.indexOf(a.which)||(a.preventDefault(),40===a.which?(r.activeIdx=(r.activeIdx+1)%r.matches.length,r.$digest()):38===a.which?(r.activeIdx=(r.activeIdx?r.activeIdx:r.matches.length)-1,r.$digest()):13===a.which||9===a.which?r.$apply(function(){r.select(r.activeIdx)}):27===a.which&&(a.stopPropagation(),x(),r.$digest()))});d.bind("click",function(){x();r.$digest()});l.after(a(A)(r))}}}]).directive("typeaheadPopup",
function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,c,e){a.templateUrl=e.templateUrl;a.isOpen=function(){return 0<a.matches.length};a.isActive=function(b){return a.active==b};a.selectActive=function(b){a.active=b};a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,c,e,b){return{restrict:"E",
scope:{index:"=",match:"=",query:"="},link:function(d,g,h){h=b(h.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:c}).success(function(a){g.replaceWith(e(a.trim())(d))})}}}]).filter("typeaheadHighlight",function(){return function(a,c){return c?a.replace(RegExp(c.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):c}});/*
 MIT License, http://www.opensource.org/licenses/MIT
*/
(function(){angular.module("AngularGM",[]).value("angulargmDefaults",{markerConstructor:google.maps.Marker,mapOptions:{zoom:8,center:new google.maps.LatLng(46,-120),mapTypeId:google.maps.MapTypeId.ROADMAP}})})();"use strict";
(function(){angular.module("AngularGM").directive("gmInfoWindow",["$parse","$compile","$timeout","angulargmUtils",function(a,c,e,b){var d=b.getEventHandlers;return{restrict:"A",priority:100,scope:!1,link:function(b,h,j){var f=angular.extend({},b.$eval(j.gmInfoWindowOptions));f.content=h[0];var l=a(j.gmInfoWindow),k=l(b);k||(k=new google.maps.InfoWindow(f),l.assign(b,k));j=d(j);angular.forEach(j,function(a,c){google.maps.event.addListener(k,c,function(){e(function(){a(b,{infoWindow:k})})})});h.replaceWith("<div></div>");
var m=k.open;k.open=function(a,f){c(h.contents())(b);m.call(k,a,f)}}}}])})();"use strict";
(function(){angular.module("AngularGM").directive("gmMap",["$timeout",function(a){return{restrict:"AE",priority:100,template:'<div><div id="" style="width:100%;height:100%;"></div><div ng-transclude></div></div>',transclude:!0,replace:!0,scope:{gmCenter:"=",gmZoom:"=",gmBounds:"=",gmMapTypeId:"=",gmMapOptions:"&",gmMapId:"&"},controller:"angulargmMapController",link:function(c,e,b,d){angular.isDefined(c.gmCenter)||(c.center={});angular.isDefined(c.gmBounds)||(c.bounds={});if(!angular.isDefined(c.gmMapId))throw"angulargm must have non-empty gmMapId attribute";
var g=!1,h=!1,j=!1,f=!1;b.hasOwnProperty("gmCenter")&&(g=!0);b.hasOwnProperty("gmZoom")&&(h=!0);b.hasOwnProperty("gmBounds")&&(j=!0);b.hasOwnProperty("gmMapTypeId")&&(f=!0);e=function(){a(function(){(g||h||j||f)&&c.$apply(function(){g&&(c.gmCenter=d.center);h&&(c.gmZoom=d.zoom);if(j){var a=d.bounds;a&&(c.gmBounds=a)}f&&(c.gmMapTypeId=d.mapTypeId)})})};d.addMapListener("drag",e);d.addMapListener("zoom_changed",e);d.addMapListener("center_changed",e);d.addMapListener("bounds_changed",e);d.addMapListener("maptypeid_changed",
e);d.addMapListener("resize",e);g&&c.$watch("gmCenter",function(a,b){a!==b&&!d.dragging&&a&&(d.center=a)},!0);h&&c.$watch("gmZoom",function(a,b){null!=a&&!isNaN(a)&&a!==b&&(d.zoom=a)});j&&c.$watch("gmBounds",function(a,b){a!==b&&!d.dragging&&a&&(d.bounds=a)});f&&c.$watch("gmMapTypeId",function(a,b){a!==b&&a&&(d.mapTypeId=a)});c.$on("gmMapResize",function(a,b){c.gmMapId()===b&&d.mapTrigger("resize")})}}}])})();"use strict";
(function(){angular.module("AngularGM").directive("gmMarkers",["$log","$parse","$timeout","angulargmUtils",function(a,c,e,b){var d=b.objToLatLng,g=b.getEventHandlers;return{restrict:"AE",priority:100,scope:{gmObjects:"&",gmGetLatLng:"&",gmGetMarkerOptions:"&",gmEvents:"&"},require:"^gmMap",link:function(a,b,c,l){if("gmObjects"in c){if(!("gmGetLatLng"in c))throw"gmGetLatLng attribute required";}else throw"gmObjects attribute required";var k=g(c),m=function(a,b){var m={};angular.forEach(b,function(b){var c=
a.gmGetLatLng({object:b}),f=d(c);if(null!=f){var n=a.gmGetMarkerOptions({object:b}),g=f.toUrlValue(l.precision);m[g]=b;if(!l.hasMarker(a.$id,c.lat,c.lng)){g={};angular.extend(g,n,{position:f});l.addMarker(a.$id,g);var h=l.getMarker(a.$id,c.lat,c.lng);angular.forEach(k,function(c,f){l.addListener(h,f,function(){e(function(){c(a.$parent.$parent,{object:b,marker:h})})})})}}});var g=[];l.forEachMarkerInScope(a.$id,function(a,b){b in m||g.push(b)});angular.forEach(g,function(b){l.removeMarkerByHash(a.$id,
b)});a.$emit("gmMarkersUpdated",c.gmObjects)};a.$watch("gmObjects().length",function(b,c){null!=b&&b!==c&&m(a,a.gmObjects())});a.$watch("gmObjects()",function(b,c){null!=b&&b!==c&&m(a,a.gmObjects())});a.$watch("gmEvents()",function(b,c){null!=b&&b!==c&&angular.forEach(b,function(b){var c=b.event;angular.forEach(b.locations,function(b){b=l.getMarker(a.$id,b.lat(),b.lng());null!=b&&e(angular.bind(this,l.trigger,b,c))})})});a.$on("gmMarkersRedraw",function(b,e){if(null==e||e===c.gmObjects)m(a),m(a,a.gmObjects())});
e(angular.bind(null,m,a,a.gmObjects()))}}}])})();"use strict";
(function(){angular.module("AngularGM").factory("angulargmContainer",["$q",function(a){var c={},e={};return{addMap:function(a,d){if(d instanceof google.maps.Map){if(a in c)throw"already contain map with id "+a;}else throw"map not a google.maps.Map: "+d;c[a]=d;a in e&&e[a].resolve(d)},getMap:function(a){return c[a]},getMapPromise:function(b){var c=e[b]||a.defer();e[b]=c;return c.promise},removeMap:function(a){a in c&&delete c[a];a in e&&delete e[a]},clear:function(){c={};e={}}}}])})();"use strict";
(function(){angular.module("AngularGM").factory("angulargmUtils",["$parse",function(a){function c(a,b){if(!(a instanceof google.maps.LatLng&&b instanceof google.maps.LatLng))return!1;var c=a.lat(),g=b.lat();if(c=1E-6>Math.abs(c-g))c=a.lng(),g=b.lng(),c=1E-6>Math.abs(c-g);return c}return{latLngEqual:c,boundsEqual:function(a,b){if(!(a instanceof google.maps.LatLngBounds&&b instanceof google.maps.LatLngBounds))return!1;var d=a.getSouthWest(),g=b.getSouthWest(),h=a.getNorthEast(),j=b.getNorthEast();return c(d,
g)&&c(h,j)},latLngToObj:function(a){if(!(a instanceof google.maps.LatLng))throw"latLng not a google.maps.LatLng";return{lat:a.lat(),lng:a.lng()}},objToLatLng:function(a){if(null!=a){var b=a.lat;a=a.lng;if(!(null==b||null==a)&&!isNaN(b)&&!isNaN(a))return new google.maps.LatLng(b,a)}return null},hasNaN:function(a){if(!(a instanceof google.maps.LatLng))throw"latLng must be a google.maps.LatLng";var b=null==a.lat()||null==a.lng();a=isNaN(a.lat())||isNaN(a.lng());return b||a},getEventHandlers:function(c){var b=
{};angular.forEach(c,function(c,e){if(0===e.lastIndexOf("gmOn",0)){var h=angular.lowercase(e.substring(4)),j=a(c);b[h]=j}});return b}}}])})();"use strict";
(function(){angular.module("AngularGM").controller("angulargmMapController",["$scope","$element","angulargmUtils","angulargmDefaults","angulargmContainer",function(a,c,e,b,d){var g=e.latLngEqual,h=e.boundsEqual,j=e.hasNaN;this._getConfig=function(a,b){var c={};angular.extend(c,b.mapOptions,a.gmMapOptions());return c};this._createMap=function(a,b,c,e){var d=e.getMap(a);d?(a=d.getDiv(),b.replaceWith(a),this._map=d,this.mapTrigger("resize"),d.setOptions(c)):(d=new google.maps.Map(b[0],c),e.addMap(a,
d));return d};this._initDragListeners=function(){var a=this;this.addMapListener("dragstart",function(){a.dragging=!0});this.addMapListener("idle",function(){a.dragging=!1});this.addMapListener("drag",function(){a.dragging=!0})};this._destroy=function(){angular.forEach(this._listeners,function(a){google.maps.event.removeListener(a)});var a=Object.keys(this._markers),b=this;angular.forEach(a,function(a){b.forEachMarkerInScope(a,function(c,f){b.removeMarkerByHash(a,f)})})};this.addMapListener=function(a,
b){var c=google.maps.event.addListener(this._map,a,b);this._listeners.push(c)};this.addMapListenerOnce=function(a,b){google.maps.event.addListenerOnce(this._map,a,b)};this.addListener=function(a,b,c){google.maps.event.addListener(a,b,c)};this.addListenerOnce=function(a,b,c){google.maps.event.addListenerOnce(a,b,c)};this.mapTrigger=function(a){google.maps.event.trigger(this._map,a)};this.trigger=function(a,b){google.maps.event.trigger(a,b)};this.addMarker=function(a,c){var k={};angular.extend(k,c);
if(!(k.position instanceof google.maps.LatLng))throw"markerOptions did not contain a position";var k=new b.markerConstructor(k),d=k.getPosition();if(this.hasMarker(a,d.lat(),d.lng()))return!1;d=d.toUrlValue(this.precision);null==this._markers[a]&&(this._markers[a]={});this._markers[a][d]=k;k.setMap(this._map);return!0};this.hasMarker=function(a,b,c){return this.getMarker(a,b,c)instanceof google.maps.Marker};this.getMarker=function(a,b,c){if(null==b||null==c)throw"lat or lng was null";b=(new google.maps.LatLng(b,
c)).toUrlValue(this.precision);return null!=this._markers[a]&&b in this._markers[a]?this._markers[a][b]:null};this.removeMarker=function(a,b,c){if(null==b||null==c)throw"lat or lng was null";b=(new google.maps.LatLng(b,c)).toUrlValue(this.precision);return this.removeMarkerByHash(a,b)};this.removeMarkerByHash=function(a,b){var c=!1,d=this._markers[a][b];d&&(d.setMap(null),c=!0);this._markers[a][b]=null;delete this._markers[a][b];return c};this.forEachMarker=function(a){if(null==a)throw"fn was null or undefined";
var b=this,c=Object.keys(this._markers).reduce(function(a,c){angular.forEach(b._markers[c],function(b){a.push(b)});return a},[]);angular.forEach(c,function(b,c){null!=b&&a(b,c)})};this.forEachMarkerInScope=function(a,b){if(null==b)throw"fn was null or undefined";angular.forEach(this._markers[a],function(a,c){null!=a&&b(a,c)})};this.getMap=function(){return this._map};angular.bind(this,function(a,c){var e=a.gmMapId();if(!e)throw"angulargm must have non-empty gmMapId attribute";var m=angular.element(c[0].firstChild);
m.attr("id",e);var q=this._getConfig(a,b);this._map=this._createMap(e,m,q,d,a);this._markers={};this._listeners=[];this.dragging=!1;Object.defineProperties(this,{precision:{value:3,writeable:!1},center:{configurable:!0,get:function(){return this._map.getCenter()},set:function(a){if(j(a))throw"center contains null or NaN";g(this.center,a)||this._map.panTo(a)}},zoom:{configurable:!0,get:function(){return this._map.getZoom()},set:function(a){if(null==a||isNaN(a))throw"zoom was null or NaN";this.zoom!==
a&&this._map.setZoom(a)}},bounds:{configurable:!0,get:function(){return this._map.getBounds()},set:function(a){if(j(a.getSouthWest())||j(a.getNorthEast()))throw"bounds contains null or NaN";h(this.bounds,a)||this._map.fitBounds(a)}},mapTypeId:{configurable:!0,get:function(){return this._map.getMapTypeId()},set:function(a){if(null==a)throw"mapTypeId was null or unknown";this.mapTypeId!==a&&this._map.setMapTypeId(a)}}});this._initDragListeners();a.$on("$destroy",angular.bind(this,this._destroy))})(a,
c)}])})();(function(){function a(a,b){var c=this,f=new google.maps.OverlayView;f.onAdd=function(){c.init_(a,b)};f.draw=function(){};f.onRemove=function(){};f.setMap(a);this.prjov_=f}var c=function(a){switch(a){case "thin":a="2px";break;case "medium":a="4px";break;case "thick":a="6px";break}return a},e=function(a){var b,f={};if(document.defaultView&&document.defaultView.getComputedStyle){if(b=a.ownerDocument.defaultView.getComputedStyle(a,""))return f.top=parseInt(b.borderTopWidth,10)||0,f.bottom=parseInt(b.borderBottomWidth,
10)||0,f.left=parseInt(b.borderLeftWidth,10)||0,f.right=parseInt(b.borderRightWidth,10)||0,f}else if(document.documentElement.currentStyle&&a.currentStyle)return f.top=parseInt(c(a.currentStyle.borderTopWidth),10)||0,f.bottom=parseInt(c(a.currentStyle.borderBottomWidth),10)||0,f.left=parseInt(c(a.currentStyle.borderLeftWidth),10)||0,f.right=parseInt(c(a.currentStyle.borderRightWidth),10)||0,f;f.top=parseInt(a.style["border-top-width"],10)||0;f.bottom=parseInt(a.style["border-bottom-width"],10)||0;
f.left=parseInt(a.style["border-left-width"],10)||0;f.right=parseInt(a.style["border-right-width"],10)||0;return f},b=0,d=0,g=function(){b="undefined"!==typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft;d="undefined"!==typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};g();var h=function(a){var c=0,f=0;a=a||window.event;"undefined"!==typeof a.pageX?(c=a.pageX,f=a.pageY):"undefined"!==typeof a.clientX&&
(c=a.clientX+b,f=a.clientY+d);return{left:c,top:f}},j=function(a){var b=a.offsetLeft,c=a.offsetTop;for(a=a.offsetParent;null!==a;){a!==document.body&&a!==document.documentElement&&(b-=a.scrollLeft,c-=a.scrollTop);var f=a,d=f.offsetLeft,e=f.offsetTop;if(!d&&!e&&window.getComputedStyle&&(f=document.defaultView.getComputedStyle(f,null).MozTransform||document.defaultView.getComputedStyle(f,null).WebkitTransform)&&"string"===typeof f)f=f.split(","),d+=parseInt(f[4],10)||0,e+=parseInt(f[5],10)||0;b+=d;
c+=e;a=a.offsetParent}return{left:b,top:c}},f=function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},l=function(a,b){"undefined"!==typeof b&&(a.style.opacity=b);"undefined"!==typeof a.style.opacity&&""!==a.style.opacity&&(a.style.filter="alpha(opacity="+100*a.style.opacity+")")};a.prototype.init_=function(a,b){var c,d=this;this.map_=a;b=b||{};this.key_=b.key||"shift";this.key_=this.key_.toLowerCase();this.borderWidths_=e(this.map_.getDiv());this.veilDiv_=[];for(c=0;4>c;c++)this.veilDiv_[c]=
document.createElement("div"),this.veilDiv_[c].onselectstart=function(){return!1},f(this.veilDiv_[c].style,{backgroundColor:"gray",opacity:0.25,cursor:"crosshair"}),f(this.veilDiv_[c].style,b.paneStyle),f(this.veilDiv_[c].style,b.veilStyle),f(this.veilDiv_[c].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[c].style.MozUserSelect="none"),l(this.veilDiv_[c]),"transparent"===this.veilDiv_[c].style.backgroundColor&&(this.veilDiv_[c].style.backgroundColor=
"white",l(this.veilDiv_[c],0)),this.map_.getDiv().appendChild(this.veilDiv_[c]);this.noZoom_=b.noZoom||!1;this.visualEnabled_=b.visualEnabled||!1;this.visualClass_=b.visualClass||"";this.visualPosition_=b.visualPosition||google.maps.ControlPosition.LEFT_TOP;this.visualPositionOffset_=b.visualPositionOffset||new google.maps.Size(35,0);this.visualPositionIndex_=b.visualPositionIndex||null;this.visualSprite_=b.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png";
this.visualSize_=b.visualSize||new google.maps.Size(20,20);this.visualTips_=b.visualTips||{};this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode";this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode";this.boxDiv_=document.createElement("div");f(this.boxDiv_.style,{border:"4px solid #736AFF"});f(this.boxDiv_.style,b.boxStyle);f(this.boxDiv_.style,{position:"absolute",display:"none"});l(this.boxDiv_);this.map_.getDiv().appendChild(this.boxDiv_);this.boxBorderWidths_=e(this.boxDiv_);
this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(a){d.onKeyDown_(a)}),google.maps.event.addDomListener(document,"keyup",function(a){d.onKeyUp_(a)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(a){d.onMouseDown_(a)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(a){d.onMouseDown_(a)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(a){d.onMouseDown_(a)}),google.maps.event.addDomListener(this.veilDiv_[3],
"mousedown",function(a){d.onMouseDown_(a)}),google.maps.event.addDomListener(document,"mousedown",function(a){d.onMouseDownDocument_(a)}),google.maps.event.addDomListener(document,"mousemove",function(a){d.onMouseMove_(a)}),google.maps.event.addDomListener(document,"mouseup",function(a){d.onMouseUp_(a)}),google.maps.event.addDomListener(window,"scroll",g)];this.dragging_=this.mouseDown_=this.hotKeyDown_=!1;this.mapPosn_=this.mousePosn_=this.mapHeight_=this.mapWidth_=this.endPt_=this.startPt_=null;
this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)};a.prototype.initControl_=function(a){var b,c,d=this;b=document.createElement("div");b.className=this.visualClass_;b.style.position="relative";b.style.overflow="hidden";b.style.height=this.visualSize_.height+
"px";b.style.width=this.visualSize_.width+"px";b.title=this.visualTips_.off;c=document.createElement("img");c.src=this.visualSprite_;c.style.position="absolute";c.style.left=-(2*this.visualSize_.width)+"px";c.style.top="0px";b.appendChild(c);b.onclick=function(a){d.hotKeyDown_=!d.hotKeyDown_;d.hotKeyDown_?(d.buttonDiv_.firstChild.style.left=-(0*d.visualSize_.width)+"px",d.buttonDiv_.title=d.visualTips_.on,d.activatedByControl_=!0,google.maps.event.trigger(d,"activate")):(d.buttonDiv_.firstChild.style.left=
-(2*d.visualSize_.width)+"px",d.buttonDiv_.title=d.visualTips_.off,google.maps.event.trigger(d,"deactivate"));d.onMouseMove_(a)};b.onmouseover=function(){d.buttonDiv_.firstChild.style.left=-(1*d.visualSize_.width)+"px"};b.onmouseout=function(){d.hotKeyDown_?(d.buttonDiv_.firstChild.style.left=-(0*d.visualSize_.width)+"px",d.buttonDiv_.title=d.visualTips_.on):(d.buttonDiv_.firstChild.style.left=-(2*d.visualSize_.width)+"px",d.buttonDiv_.title=d.visualTips_.off)};b.ondragstart=function(){return!1};
f(b.style,{cursor:"pointer",marginTop:a.height+"px",marginLeft:a.width+"px"});return b};a.prototype.isHotKeyDown_=function(a){var b;a=a||window.event;b=a.shiftKey&&"shift"===this.key_||a.altKey&&"alt"===this.key_||a.ctrlKey&&"ctrl"===this.key_;if(!b)switch(a.keyCode){case 16:"shift"===this.key_&&(b=!0);break;case 17:"ctrl"===this.key_&&(b=!0);break;case 18:"alt"===this.key_&&(b=!0)}return b};a.prototype.isMouseOnMap_=function(){var a=this.mousePosn_;if(a){var b=this.mapPosn_,c=this.map_.getDiv();
return a.left>b.left&&a.left<b.left+c.offsetWidth&&a.top>b.top&&a.top<b.top+c.offsetHeight}return!1};a.prototype.setVeilVisibility_=function(){var a;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){a=this.map_.getDiv();this.mapWidth_=a.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right);this.mapHeight_=a.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom);if(this.activatedByControl_){a=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width;var b=parseInt(this.buttonDiv_.style.top,
10)+this.visualPositionOffset_.height,c=this.visualSize_.width,f=this.visualSize_.height;this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.left="0px";this.veilDiv_[0].style.width=a+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";this.veilDiv_[1].style.top="0px";this.veilDiv_[1].style.left=a+c+"px";this.veilDiv_[1].style.width=this.mapWidth_-(a+c)+"px";this.veilDiv_[1].style.height=this.mapHeight_+"px";this.veilDiv_[2].style.top="0px";this.veilDiv_[2].style.left=a+"px";this.veilDiv_[2].style.width=
c+"px";this.veilDiv_[2].style.height=b+"px";this.veilDiv_[3].style.top=b+f+"px";this.veilDiv_[3].style.left=a+"px";this.veilDiv_[3].style.width=c+"px";this.veilDiv_[3].style.height=this.mapHeight_-(b+f)+"px"}else{this.veilDiv_[0].style.left="0px";this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.width=this.mapWidth_+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";for(a=1;a<this.veilDiv_.length;a++)this.veilDiv_[a].style.width="0px",this.veilDiv_[a].style.height="0px"}for(a=0;a<this.veilDiv_.length;a++)this.veilDiv_[a].style.display=
"block"}else for(a=0;a<this.veilDiv_.length;a++)this.veilDiv_[a].style.display="none"};a.prototype.onKeyDown_=function(a){this.map_&&(!this.hotKeyDown_&&this.isHotKeyDown_(a))&&(this.mapPosn_=j(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))};a.prototype.getMousePoint_=function(a){a=h(a);var b=new google.maps.Point;b.x=a.left-this.mapPosn_.left-this.borderWidths_.left;b.y=a.top-this.mapPosn_.top-this.borderWidths_.top;
b.x=Math.min(b.x,this.mapWidth_);b.y=Math.min(b.y,this.mapHeight_);b.x=Math.max(b.x,0);b.y=Math.max(b.y,0);return b};a.prototype.onMouseDown_=function(a){this.map_&&this.hotKeyDown_&&(this.mapPosn_=j(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(a),this.boxDiv_.style.width=this.boxDiv_.style.height="0px",a=this.prjov_.getProjection().fromContainerPixelToLatLng(this.startPt_),google.maps.event.trigger(this,"dragstart",a))};a.prototype.onMouseDownDocument_=function(){this.mouseDown_=
!0};a.prototype.onMouseMove_=function(a){this.mousePosn_=h(a);if(this.dragging_){this.endPt_=this.getMousePoint_(a);a=Math.min(this.startPt_.x,this.endPt_.x);var b=Math.min(this.startPt_.y,this.endPt_.y),c=Math.abs(this.startPt_.x-this.endPt_.x),f=Math.abs(this.startPt_.y-this.endPt_.y),d=Math.max(0,c-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),e=Math.max(0,f-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.left="0px";
this.veilDiv_[0].style.width=a+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";this.veilDiv_[1].style.top="0px";this.veilDiv_[1].style.left=a+c+"px";this.veilDiv_[1].style.width=this.mapWidth_-(a+c)+"px";this.veilDiv_[1].style.height=this.mapHeight_+"px";this.veilDiv_[2].style.top="0px";this.veilDiv_[2].style.left=a+"px";this.veilDiv_[2].style.width=c+"px";this.veilDiv_[2].style.height=b+"px";this.veilDiv_[3].style.top=b+f+"px";this.veilDiv_[3].style.left=a+"px";this.veilDiv_[3].style.width=
c+"px";this.veilDiv_[3].style.height=this.mapHeight_-(b+f)+"px";this.boxDiv_.style.top=b+"px";this.boxDiv_.style.left=a+"px";this.boxDiv_.style.width=d+"px";this.boxDiv_.style.height=e+"px";this.boxDiv_.style.display="block";google.maps.event.trigger(this,"drag",new google.maps.Point(a,b+f),new google.maps.Point(a+c,b),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=j(this.map_.getDiv()),this.setVeilVisibility_())};a.prototype.onMouseUp_=function(a){var b,c=this;this.mouseDown_=
!1;if(this.dragging_)if(this.getMousePoint_(a).x===this.startPt_.x&&this.getMousePoint_(a).y===this.startPt_.y)this.onKeyUp_(a);else{var f=Math.min(this.startPt_.x,this.endPt_.x),d=Math.min(this.startPt_.y,this.endPt_.y);b=Math.abs(this.startPt_.x-this.endPt_.x);var e=Math.abs(this.startPt_.y-this.endPt_.y),f=f+this.borderWidths_.left,d=d+this.borderWidths_.top,g=this.prjov_.getProjection(),e=g.fromContainerPixelToLatLng(new google.maps.Point(f,d+e)),d=g.fromContainerPixelToLatLng(new google.maps.Point(f+
b,d)),f=new google.maps.LatLngBounds(e,d);this.noZoom_?this.boxDiv_.style.display="none":(b=this.map_.getZoom(),this.map_.fitBounds(f),this.map_.getZoom()<b&&this.map_.setZoom(b),e=g.fromLatLngToContainerPixel(e),g=g.fromLatLngToContainerPixel(d),e.x-=this.borderWidths_.left,e.y-=this.borderWidths_.top,g.x-=this.borderWidths_.left,g.y-=this.borderWidths_.top,this.boxDiv_.style.left=e.x+"px",this.boxDiv_.style.top=g.y+"px",this.boxDiv_.style.width=Math.abs(g.x-e.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+
"px",this.boxDiv_.style.height=Math.abs(g.y-e.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout(function(){c.boxDiv_.style.display="none"},1E3));this.dragging_=!1;this.onMouseMove_(a);google.maps.event.trigger(this,"dragend",f);if(!this.isHotKeyDown_(a))this.onKeyUp_(a)}};a.prototype.onKeyUp_=function(){var a,b,c,f,d;b=null;if(this.map_&&this.hotKeyDown_){this.hotKeyDown_=!1;this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,a=Math.min(this.startPt_.x,this.endPt_.x),
b=Math.min(this.startPt_.y,this.endPt_.y),c=Math.abs(this.startPt_.x-this.endPt_.x),f=Math.abs(this.startPt_.y-this.endPt_.y),d=this.prjov_.getProjection(),f=d.fromContainerPixelToLatLng(new google.maps.Point(a,b+f)),a=d.fromContainerPixelToLatLng(new google.maps.Point(a+c,b)),b=new google.maps.LatLngBounds(f,a));for(a=0;a<this.veilDiv_.length;a++)this.veilDiv_[a].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-(2*this.visualSize_.width)+"px",this.buttonDiv_.title=
this.visualTips_.off,this.buttonDiv_.style.display="");google.maps.event.trigger(this,"deactivate",b)}};google.maps.Map.prototype.enableKeyDragZoom=function(b){this.dragZoom_=new a(this,b)};google.maps.Map.prototype.disableKeyDragZoom=function(){var a,b=this.dragZoom_;if(b){for(a=0;a<b.listeners_.length;++a)google.maps.event.removeListener(b.listeners_[a]);this.getDiv().removeChild(b.boxDiv_);for(a=0;a<b.veilDiv_.length;a++)this.getDiv().removeChild(b.veilDiv_[a]);b.visualEnabled_&&this.controls[b.visualPosition_].removeAt(b.controlIndex_);
b.prjov_.setMap(null);this.dragZoom_=null}};google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_};google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}})();(function(){angular.module("hutmap.services",[])})();(function(){angular.module("hutmap.controllers",[])})();(function(){angular.module("hutmap","hutmap.services hutmap.directives hutmap.filters hutmap.controllers AngularGM ngResource ui.bootstrap".split(" ")).config(["$routeProvider","$locationProvider","PlacesProvider",function(a,c,e){a.when("/",{templateUrl:"/partials/home.html",activetab:"home"}).when("/map/",{templateUrl:"/partials/map.html",activetab:"map",reloadOnSearch:!1}).when("/about/",{templateUrl:"/partials/about.html",activetab:"about"});c.html5Mode(!0);e.bounds(new google.maps.LatLngBounds(new google.maps.LatLng(30,
-130),new google.maps.LatLng(65,-80)))}]).constant("hutmapMapId","map_canvas").value("mapOptions",{zoom:3,center:new google.maps.LatLng(46.87916,-120),mapTypeId:google.maps.MapTypeId.TERRAIN,streetViewControl:!1,panControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}}).value("markerOptions",{huts:{icon:"/static/img/marker_gray_small.png",shape:{coord:[6,0,2,2,0,6,6,13,12,6,10,2,6,0],type:"poly"},zIndex:0},filteredHuts:{icon:"/static/img/marker_red_small.png",
shape:{coord:[6,0,2,2,0,6,6,13,12,6,10,2,6,0],type:"poly"},zIndex:1},selected:{icon:"/static/img/marker_yellow_small.png",zIndex:2}}).run(["hutmapMapId","angulargmContainer",function(a,c){c.getMapPromise(a).then(function(a){var b={MSR_TOPO:new google.maps.ImageMapType({name:"MSR USGS",alt:"USGS topos from Microsoft Research",minZoom:1,maxZoom:15,tileSize:new google.maps.Size(256,256),isPng:!1,getTileUrl:function(b,c){var h=a.getProjection(),j=Math.pow(2,c),f=new google.maps.Point(256*b.x/j,256*(b.y+
1)/j),j=new google.maps.Point(256*(b.x+1)/j,256*b.y/j),f=h.fromPointToLatLng(f),h=h.fromPointToLatLng(j);return"http://msrmaps.com/ogcmap.ashx?version=1.1.1&request=GetMap&Layers=drg&Styles=default&SRS=EPSG:4326&BBOX="+[f.lng(),f.lat(),h.lng(),h.lat()].join()+"&width=256&height=256&format=image/jpeg"}}),ARC_GIS_USA:new google.maps.ImageMapType({name:"ArcGIS USA",alt:"ArcGIS USA Topos",minZoom:1,maxZoom:15,tileSize:new google.maps.Size(256,256),isPng:!0,getTileUrl:function(a,b){var c=1<<b,e=a.x%c;
0>e&&(e+=c);return"http://services.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/"+parseInt(b)+"/"+a.y+"/"+e}}),ARC_GIS_WORLD:new google.maps.ImageMapType({name:"ArcGIS World",alt:"ArcGIS World Topos",minZoom:1,maxZoom:15,tileSize:new google.maps.Size(256,256),isPng:!0,getTileUrl:function(a,b){var c=1<<b,e=a.x%c;0>e&&(e+=c);return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/"+parseInt(b)+"/"+a.y+"/"+e}})};angular.forEach(b,function(b){a.mapTypes.set(b.name,
b)});a.setOptions({mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN,b.MSR_TOPO.name,b.ARC_GIS_USA.name,b.ARC_GIS_WORLD.name]}});a.setMapTypeId(b.ARC_GIS_WORLD.name);a.enableKeyDragZoom({key:"alt",visualEnabled:!0,visualPosition:google.maps.ControlPosition.LEFT_CENTER})})}])})();(function(){angular.module("hutmap.filters",[]).filter("truncate",function(){return function(a,c,e){isNaN(c)&&(c=10);void 0===e&&(e="...");return null==a||0==a.length?null:a.length<=c||a.length-e.length<=c?a:String(a).substring(0,c-e.length)+e}})})();(function(){angular.module("hutmap.directives",[]).directive("blur",["$parse",function(a){return function(c,e,b){var d=a(b.blur);e.bind("blur",function(){d(c)})}}])})();(function(){angular.module("hutmap.controllers").controller("HutCtrl",["$scope","$location","$timeout","Huts",function(a,c,e,b){var d=0;a.loading=0;a.huts;a.filteredHuts;a.filteredHutIds;a.query;a.selectedHut;a.selectedHutRegion;a.selectedHutAgency;a.resetLoading=function(){a.loading=0};a.incLoading=function(){a.loading++};a.decLoading=function(){0<a.loading&&a.loading--};a.setQuery=function(b){a.ui.loadNewHuts&&(a.query=b)};a.setFilteredHuts=function(b,c){a.filteredHuts=b;a.filteredHutIds=c};a.setSelectedHut=
function(c){if(a.selectedHut=c)b.agency(c.agency).then(function(b){a.selectedHutAgency=b}),b.region(c.region).then(function(b){a.selectedHutRegion=b})};a.$watch("query",function(c){if(null!=c){var g=++d;e(function(){g===d&&c&&(a.incLoading(),b.query(c).then(function(b){a.decLoading();g===d&&(a.resetLoading(),a.huts=b)},function(){a.decLoading()}))})}});a.$on("updateLocation",function(){a.selectedHut&&c.search("h_selected",a.selectedHut.id)});var g=c.search().h_selected;g&&b.hut(g).then(function(b){a.setSelectedHut(b);
a.$broadcast("clickSelected")})}])})();(function(){angular.module("hutmap.controllers").controller("HutImgCtrl",["$scope",function(a){a.getImgUrl=function(c,e,b){var d="";c&&(d=c.photo?c.photo:c.photo_url?c.photo_url:3===c.location_accuracy||5===c.location_accuracy?"http://maps.googleapis.com/maps/api/staticmap?center="+c.location.coordinates[1]+"%2C"+c.location.coordinates[0]+"&zoom=19&size="+e+"x"+b+"&maptype=satellite&sensor=false&key="+a.GOOGLE_API_KEY:a.STATIC_URL+"img/no-image-available.gif");return d}}])})();(function(){angular.module("hutmap.controllers").controller("CarouselCtrl",["$scope","$route","$http","$q",function(a,c,e,b){a.slides=[{title:"Plummer Hut",location:"Waddington Range, British Columbia, Canada",hutLink:"/map/?h_selected=357&m_center=51.388403,-125.062053&m_zoom=9",agency:{name:"BC Mountaineering Club",url:""},thumbnail:"/static/img/no-image-available.gif",image:"/static/img/carousel/plummer-hut-hires.jpg"},{title:"Joe River Chickee",location:"lorem ipsum dolor",hutLink:"",agency:{name:"lorem ipsum dolor",
url:""},thumbnail:"/static/img/no-image-available.gif",image:"/static/img/carousel/joe-river-chickee-hires.jpg"},{title:"John Muir Shelter",location:"lorem ipsum dolor",hutLink:"",agency:{name:"lorem ipsum dolor",url:""},thumbnail:"/static/img/no-image-available.gif",image:"/static/img/carousel/john-muir-shelter-hires.jpg"}];a.imgStyle=function(a){return{"background-image":"url('"+a+"')"}};a.carouselInterval=-1;var d=[];angular.forEach(a.slides,function(a){d.push(e.get(a.image))});b.all(d).then(function(){a.carouselInterval=
8E3})}])})();(function(){angular.module("hutmap.controllers").controller("SearchCtrl",["$scope","$location","$route","$log","$q","$document","Places",function(a,c,e,b,d,g,h){a.submitting=!1;a.autocompleting=0;a.lastQuery;a.selected;a.clickBody=function(){g.find("body").triggerHandler("click")};a.blurInput=function(){g.find("input").trigger("blur")};a.getPlaces=function(b){a.lastQuery=b;var c=d.defer();a.autocompleting++;h.getPlacePredictions(b,function(b){a.$apply(function(){a.autocompleting--;c.resolve(b)})},
function(){a.$apply(function(){a.autocompleting--;c.resolve([])})});return c.promise};var j=function(c){a.submitting=!1;b.error(c);a.addAlert("error","There was an error retrieving search results. TODO: better messages")};a.$watch("selected",function(b){b&&b.constructor===Object&&a.submit(b)});a.search=function(b){b&&b.constructor===Object?a.submit(b):b&&a.getPlaces(b).then(function(b){0<b.length&&a.submit(b[0])})};a.submit=function(b){b&&b.reference&&(a.submitting=!0,a.autocompleting=0,h.getDetails(b.reference,
function(b){a.$apply(function(){a.submitting=!1;e.reload();c.path("/map/").search({}).search("m_zoom",8);b.geometry.location&&c.search("m_center",b.geometry.location.toUrlValue());b.geometry.viewport&&c.search("m_bounds",b.geometry.viewport.toUrlValue())});a.blurInput()},j))}}])})();(function(){angular.module("hutmap.controllers").controller("BottomBarCtrl",["$scope",function(a){a.accuracy_text="Unverified;Wild guess;Guess;Found on satellite or topo;Surveyed by GPS;Surveyed by GPS and found on satellite or topo".split(";");a.mouseoverHut=function(c){a.setHutMarkerEvents([{event:"mouseover",locations:[new google.maps.LatLng(c.location.coordinates[1],c.location.coordinates[0])]}])};a.mouseoutHut=function(c){a.setHutMarkerEvents([{event:"mouseout",locations:[new google.maps.LatLng(c.location.coordinates[1],
c.location.coordinates[0])]}])};a.clickHut=function(c){a.setHutMarkerEvents([{event:"click",locations:[new google.maps.LatLng(c.location.coordinates[1],c.location.coordinates[0])]}])}}])})();(function(){angular.module("hutmap.controllers").controller("LinkCtrl",["$scope","$location","$q","$rootScope",function(a,c,e,b){var d=a.GOOGLE_API_KEY,g=e.defer(),h=g.promise;gapi.client.setApiKey(d);gapi.client.load("urlshortener","v1",function(){b.$apply(function(){g.resolve()})});a.generateLink=function(){a.link={value:"..."};a.$broadcast("updateLocation");var d=c.absUrl(),f=e.defer();h.then(function(){gapi.client.urlshortener.url.insert({resource:{longUrl:d}}).execute(function(a){b.$apply(function(){f.resolve(a.id)})})});
f.promise.then(function(b){a.link.value=b});c.search({})};a.link={value:"..."}}])})();(function(){angular.module("hutmap.controllers").controller("AlertCtrl",["$scope",function(a){a.alerts=[];a.addAlert=function(c,e){a.alerts.push({type:c,msg:e})};a.closeAlert=function(c){a.alerts.splice(c,1)}}])})();(function(){angular.module("hutmap.controllers").controller("FilterCtrl",["$scope","$timeout","$location",function(a,c,e){function b(a){angular.forEach(a,function(a){a.include=!1})}function d(){var b=[],c=[],d=g(a.f.shelterType),e=g(a.f.services);angular.forEach(a.huts,function(g){var j;j=a.f.season;if(j=j.summer&&g.open_summer||j.winter&&g.open_winter||j.unknown&&!g.open_summer&&!g.open_winter)if(j=!1,j=a.f.anyShelterType.include?!0:h(g.types,d)){var t=!1;a.f.anyBackcountryAccess.include?t=!0:angular.forEach(a.f.backcountryAccess,
function(a){a.include&&a.$match(g)&&(t=!0)});if(j=t)if(j=!1,a.f.noServices.include&&!g.has_services&&!g.has_optional_services?j=!0:0<e.length&&g.has_services&&null!=g.services&&(j=h(g.services,e)),j){var u=!1;a.f.anyReservations.include?u=!0:angular.forEach(a.f.reservations,function(a){a.include&&a.$match(g)&&(u=!0)});if(j=u){j=a.f.capacity.min;var p=a.f.capacity.max,s=g.capacity_hut_min,v=g.capacity_hut_max;if(j=s<=j&&j<=v||s<=p&&p<=v||j<=s&&v<=p)j=a.f.altitude.min,p=a.f.altitude.max,a.f.altitude.meters||
(j/=3.28084,p/=3.28084),j=j<=g.altitude_meters&&g.altitude_meters<=p}}}j&&(b.push(g),c[g.id]=g.id)});a.setFilteredHuts(b,c);a.$broadcast("gmMarkersRedraw","huts")}function g(a){var b=[];angular.forEach(a,function(a){a.include&&(b=b.concat(a.$keywords))});return b}function h(a,b){var c=!1;angular.forEach(b,function(b){-1<a.indexOf(b)&&(c=!0)});return c}a.resetFilters=function(){a.f={};a.f.season={winter:!0,summer:!0,unknown:!0};a.f.anyShelterType={include:!0,$tooltip:"Includes all shelter types"};
a.f.shelterType={"0":{name:"caves",include:!1,$keywords:["Cave"]},1:{name:"huts & yurts",include:!1,$keywords:"Hut;Yurt;Chickee;Lean-to;Wall Tent;Shelter".split(";")},2:{name:"fire lookouts",include:!1,$keywords:["Fire Lookout"]},3:{name:"compounds",include:!1,$keywords:"Compound;Hostel;Tea House;Lodge;Chalet;Ranch;Farm".split(";")}};a.f.anyBackcountryAccess={include:!0,$tooltip:"Includes all access methods"};a.f.backcountryAccess={"0":{name:"road",include:!1,$tooltip:"Huts that can be driven to",
$match:function(b){return 0===b.backcountry||1===b.backcountry&&a.f.season.summer}},1:{name:"trail",include:!1,$tooltip:"Accessible by trail",$match:function(a){var b=!1;2<=a.backcountry&&(b=-1!==a.access_no_snow.indexOf("Trail"));return b}},2:{name:"off-trail",include:!1,$tooltip:"Scramble, Bushwack, Glacier Travel, etc.",$match:function(a){var b=!1;2<=a.backcountry&&(b=h(a.access_no_snow,["Off Trail","Bushwack","Scramble","Glacier"]));return b}},3:{name:"snow",include:!1,$tooltip:"Snowmobile, Ski, etc.",
$match:function(b){var c=!1;1===b.backcountry&&a.f.season.winter?c=!0:2<=b.backcountry&&(c=h(b.access_no_snow,["Snowmobile","Cat"]));return c}},4:{name:"boat",include:!1,$tooltip:"Motor Boat, Canoe, etc.",$match:function(a){var b=!1;2<=a.backcountry&&(b=h(a.access_no_snow,["Boat"]));return b}},5:{name:"aircraft",include:!1,$tooltip:"Helicopter, Skiplane, etc.",$match:function(a){var b=!1;2<=a.backcountry&&(b=h(a.access_no_snow,["Plane"]));return b}}};a.f.noServices={include:!0,$tooltip:"No services available"};
a.f.services={"0":{name:"transportation",include:!0,$keywords:["Transportation (Helicopter)","Transportation (Snowcat)"]},1:{name:"food",include:!0,$keywords:["Half Board","Full Board","Stocked Food","Breakfast"]},2:{name:"guide",include:!0,$keywords:["Guide"]}};a.f.anyReservations={include:!0,$tooltip:"Both reserveable and non-reserveable huts"};a.f.reservations={"0":{name:"1st come 1st served",include:!1,$tooltip:"The hut can not be reserved",$match:function(a){return a.is_fee_person&&0===a.fee_person_min&&
0===a.fee_person_max&&!a.is_fee_hut&&!a.reservations}},1:{name:"shared",include:!1,$tooltip:"A spot or room in the hut can be reserved",$match:function(a){return a.is_fee_person&&a.reservations}},2:{name:"private",include:!1,$tooltip:"The whole hut can be reserved for a private party",$match:function(a){return a.is_fee_hut&&a.reservations}}};a.f.capacity={min:0,max:200};a.f.altitude={meters:!0,min:0,max:5E3}};a.$watch("f.anyShelterType.include",function(c){c&&b(a.f.shelterType,!1)});a.$watch("f.anyBackcountryAccess.include",
function(c){c&&b(a.f.backcountryAccess,!1)});a.$watch("f.anyReservations.include",function(c){c&&b(a.f.reservations,!1)});a.sorted=function(a){a=Object.keys(a);a.sort();return a};a.filter=function(){a.incLoading();c(d).then(function(){a.decLoading()})};a.$watch("huts",function(){a.filter()});a.$on("updateLocation",function(){a.f&&e.search("f",angular.toJson(a.f))});a.resetFilters();var j=e.search().f;e.search("f",null);null!=j&&$.extend(!0,a.f,angular.fromJson(j));a.filter()}])})();(function(){angular.module("hutmap.controllers").controller("MapConfigCtrl",["$scope","$http","hutmapMapId","mapOptions","markerOptions",function(a,c,e,b,d){var g,h;a.hutmapMapId=e;a.mapOptions=b;a.markerOptions=d;a.getMarkerOptions=function(b){var c={};return a.filteredHuts&&b.id in a.filteredHutIds?angular.extend(c,a.markerOptions.filteredHuts):angular.extend(c,a.markerOptions.huts)};a.selectHut=function(b,c){if(g){var e=angular.extend({},d.huts,{icon:h});g.setOptions(e)}g=b;h=b.getIcon();b.setOptions(d.selected);
a.setSelectedHut(c)}}])})();(function(){angular.module("hutmap.controllers").controller("HutmapCtrl",["$scope","$route","$timeout",function(a,c,e,b){a.$route=c;a.ui={showFilterSidebar:!0,loadNewHuts:!0};a.$watch("ui.showFilterSidebar",function(){e(function(){a.$broadcast("gmMapResize",b)},600)})}])})();(function(){angular.module("hutmap.controllers").controller("MapCtrl",["$scope","$location","$timeout","$q","utils","MarkerTooltip",function(a,c,e,b,d,g){var h=b.defer(),j=b.defer(),f={};a.center;a.zoom;a.bounds;a.mapTypeId;a.hutMarkerEvents;var l=function(){b.all([h.promise,j.promise]).then(function(){a.selectedHut&&(a.hutMarkerEvents=[{event:"click",locations:[d.latLngFromHut(a.selectedHut)]}])})};a.$watch("center != null && zoom != null",function(a){a&&h.resolve()});a.$watch("huts != null",function(a){a&&
j.resolve()});a.$watch("bounds",function(b){b&&a.setQuery({bounds:b})});a.$on("gmMarkersUpdated",function(a,b){"huts"===b&&l()});a.$on("clickSelected",function(){l()});a.setHutMarkerEvents=function(b){a.hutMarkerEvents=b};a.showMarkerTooltip=function(a,b){var c=f[a.getPosition().toUrlValue()];c?c.show():(c=new g({marker:a,content:b.name}),f[a.getPosition().toUrlValue()]=c)};a.hideMarkerTooltip=function(){angular.forEach(f,function(a){a.hide()})};a.$on("updateLocation",function(){a.center&&c.search("m_center",
a.center.toUrlValue());a.zoom&&c.search("m_zoom",a.zoom);a.mapTypeId&&c.search("m_maptypeid",a.mapTypeId)});var k=c.search().m_center,m=c.search().m_zoom,q=c.search().m_bounds,n=c.search().m_maptypeid;c.search("m_center",null);c.search("m_zoom",null);c.search("m_bounds",null);c.search("m_maptypeid",null);h.promise.then(function(){var b=null!=q;!b&&null!=k&&(a.center=d.latLngFromUrlValue(k));!b&&null!=m&&(a.zoom=Number(m));b&&(a.bounds=d.boundsFromUrlValue(q));null!=n&&(a.mapTypeId=n)})}])})();(function(){angular.module("hutmap.services").factory("utils",[function(){return{latLngFromUrlValue:function(a){a=a.split(",");return new google.maps.LatLng(a[0],a[1])},latLngFromHut:function(a){return new google.maps.LatLng(a.location.coordinates[1],a.location.coordinates[0])},boundsFromUrlValue:function(a){a=a.split(",");return new google.maps.LatLngBounds(new google.maps.LatLng(a[0],a[1]),new google.maps.LatLng(a[2],a[3]))}}}])})();(function(){angular.module("hutmap.services").provider("Places",[function(){var a={},c=new google.maps.LatLngBounds(new google.maps.LatLng(-90,180),new google.maps.LatLng(90,-180));a.bounds=function(a){c=a};a.$get=function(){function a(b,c,d,e){e==google.maps.places.PlacesServiceStatus.OK?b(d):c(e)}var b={},d=angular.element('<div id="google-attributions"></div>'),g=new google.maps.places.PlacesService(d[0]),h=new google.maps.places.AutocompleteService;b.getPlacePredictions=function(b,d,g){h.getPlacePredictions({input:b,
bounds:c},angular.bind(this,a,d,g))};b.getDetails=function(b,c,d){g.getDetails({reference:b},angular.bind(this,a,c,d))};b.textSearch=function(b,c,d){g.textSearch(b,angular.bind(this,a,c,d))};return b};return a}])})();(function(){angular.module("hutmap.services").factory("Huts",["$http","$q","utils",function(a,c,e){function b(a){if(null==a)throw"id should not be null";a.constructor===String&&-1<a.indexOf("/")&&(a=a.slice(0,-1),a=a.slice(a.lastIndexOf("/")+1));return Number(a)}var d={},g,h=c.defer();a.get("/static/data/huts.json").success(function(a){null!=a?(g=a,h.resolve()):h.reject("/static/data/huts.json response was null")}).error(function(a){h.reject(a)});d.query=function(a){return h.promise.then(function(){var b=
a||{},c=b.bounds,d=b.limit||0,h=[];angular.forEach(g.huts.object_index,function(a){var b;if(b=0===d||h.length<d)c?(b=e.latLngFromHut(a),b=c.contains(b)):b=!0;b&&h.push(a)});return h})};d.totalHutCount=function(){return h.promise.then(function(){return g.huts.meta.total_count})};d.hut=function(a){return h.promise.then(function(){var c=b(a);return g.huts.object_index[c]})};d.agency=function(a){return h.promise.then(function(){var c=b(a);return g.agencies.object_index[c]})};d.region=function(a){return h.promise.then(function(){var c=
b(a);return g.regions.object_index[c]})};return d}])})();(function(){angular.module("hutmap.services").factory("MarkerTooltip",[function(){function a(a){this.marker_=a.marker;this.content_=a.content;this.map_=a.marker.get("map");this.div_=null;this.setMap(this.map_)}a.prototype=new google.maps.OverlayView;a.prototype.onAdd=function(){var a=document.createElement("DIV"),e=document.createElement("DIV");a.appendChild(e);a.style.position="absolute";a.className+=" tooltip fade in";e.className+=" tooltip-inner";e.innerHTML=this.content_;this.div_=a;this.getPanes().floatPane.appendChild(this.div_)};
a.prototype.draw=function(){var a=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition()),e=this.div_;e.style.left=a.x+"px";e.style.top=a.y+"px"};a.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_)};a.prototype.hide=function(){this.div_&&(this.div_.style.visibility="hidden")};a.prototype.show=function(){this.div_&&(this.div_.style.visibility="visible")};return a}])})();
