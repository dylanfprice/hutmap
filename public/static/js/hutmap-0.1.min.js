'use strict';angular.module("$strap.directives",[]).directive("bsTooltip",["$parse","$compile",function($parse,$compile){return{restrict:"A",scope:true,link:function postLink(scope,element,attrs,ctrl){var getter=$parse(attrs.bsTooltip),setter=getter.assign,value=getter(scope);scope.$watch(attrs.bsTooltip,function(newValue,oldValue){if(newValue!==oldValue)value=newValue});if(!!attrs.unique)element.on("show",function(ev){$(".tooltip.in").each(function(){var $this=$(this),tooltip=$this.data("tooltip");
if(tooltip&&!tooltip.$element.is(element))$this.tooltip("hide")})});element.tooltip({title:function(){return angular.isFunction(value)?value.apply(null,arguments):value},html:true});var tooltip=element.data("tooltip");tooltip.show=function(){var e=$.Event("show");this.$element.trigger(e);if(e.isDefaultPrevented())return;var r=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);this.tip().data("tooltip",this);return r};tooltip.hide=function(){var e=$.Event("hide");this.$element.trigger(e);
if(e.isDefaultPrevented())return;return $.fn.tooltip.Constructor.prototype.hide.apply(this,arguments)};scope._tooltip=function(event){element.tooltip(event)};scope.hide=function(){element.tooltip("hide")};scope.show=function(){element.tooltip("show")};scope.dismiss=scope.hide}}}]);angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.collapse","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.tabs","ui.bootstrap.tooltip","ui.bootstrap.transition","ui.bootstrap.typeahead"]);
angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/dialog/message.html","template/pagination/pagination.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/tabs/pane.html","template/tabs/tabs.html","template/tooltip/tooltip-popup.html","template/typeahead/typeahead.html"]);
angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:true}).controller("AccordionController",["$scope","$attrs","accordionConfig",function($scope,$attrs,accordionConfig){this.groups=[];this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;if(closeOthers)angular.forEach(this.groups,function(group){if(group!==openGroup)group.isOpen=false})};this.addGroup=
function(groupScope){var that=this;this.groups.push(groupScope);groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})};this.removeGroup=function(group){var index=this.groups.indexOf(group);if(index!==-1)this.groups.splice(this.groups.indexOf(group),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:true,replace:false,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",
function($parse,$transition,$timeout){return{require:"^accordion",restrict:"EA",transclude:true,replace:true,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function($scope){this.setHeading=function(element){this.heading=element}}],link:function(scope,element,attrs,accordionCtrl){var getIsOpen,setIsOpen;accordionCtrl.addGroup(scope);scope.isOpen=false;if(attrs.isOpen){getIsOpen=$parse(attrs.isOpen);setIsOpen=getIsOpen.assign;scope.$watch(function watchIsOpen(){return getIsOpen(scope.$parent)},
function updateOpen(value){scope.isOpen=value});scope.isOpen=getIsOpen?getIsOpen(scope.$parent):false}scope.$watch("isOpen",function(value){if(value)accordionCtrl.closeOthers(scope);if(setIsOpen)setIsOpen(scope.$parent,value)})}}}]).directive("accordionHeading",function(){return{restrict:"E",transclude:true,template:"",replace:true,require:"^accordionGroup",compile:function(element,attr,transclude){return function link(scope,element,attr,accordionGroupCtrl){accordionGroupCtrl.setHeading(transclude(scope,
function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(scope,element,attr,controller){scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){if(heading){element.html("");element.append(heading)}})}}});angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:true,replace:true,scope:{type:"=",close:"&"}}});
angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(buttonConfig){var activeClass=buttonConfig.activeClass||"active";var toggleEvent=buttonConfig.toggleEvent||"click";return{require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var value=scope.$eval(attrs.btnRadio);scope.$watch(function(){return ngModelCtrl.$modelValue},function(modelValue){if(angular.equals(modelValue,value))element.addClass(activeClass);
else element.removeClass(activeClass)});element.bind(toggleEvent,function(){if(!element.hasClass(activeClass))scope.$apply(function(){ngModelCtrl.$setViewValue(value)})})}}}]).directive("btnCheckbox",["buttonConfig",function(buttonConfig){var activeClass=buttonConfig.activeClass||"active";var toggleEvent=buttonConfig.toggleEvent||"click";return{require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var trueValue=scope.$eval(attrs.btnCheckboxTrue);var falseValue=scope.$eval(attrs.btnCheckboxFalse);
trueValue=angular.isDefined(trueValue)?trueValue:true;falseValue=angular.isDefined(falseValue)?falseValue:false;scope.$watch(function(){return ngModelCtrl.$modelValue},function(modelValue){if(angular.equals(modelValue,trueValue))element.addClass(activeClass);else element.removeClass(activeClass)});element.bind(toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(activeClass)?falseValue:trueValue)})})}}}]);
angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function($scope,$timeout,$transition,$q){var self=this,slides=self.slides=[],currentIndex=-1,currentTimeout,isPlaying;self.currentSlide=null;self.select=function(nextSlide,direction){var nextIndex=slides.indexOf(nextSlide);if(direction===undefined)direction=nextIndex>currentIndex?"next":"prev";if(nextSlide&&nextSlide!==self.currentSlide)if($scope.$currentTransition){$scope.$currentTransition.cancel();
$timeout(goNext)}else goNext();function goNext(){if(self.currentSlide&&angular.isString(direction)&&!$scope.noTransition&&nextSlide.$element){nextSlide.$element.addClass(direction);nextSlide.$element.attr("offsetWidth",nextSlide.$element[0].offsetWidth);angular.forEach(slides,function(slide){angular.extend(slide,{direction:"",entering:false,leaving:false,active:false})});angular.extend(nextSlide,{direction:direction,active:true,entering:true});angular.extend(self.currentSlide||{},{direction:direction,
leaving:true});$scope.$currentTransition=$transition(nextSlide.$element,{});(function(next,current){$scope.$currentTransition.then(function(){transitionDone(next,current)},function(){transitionDone(next,current)})})(nextSlide,self.currentSlide)}else transitionDone(nextSlide,self.currentSlide);self.currentSlide=nextSlide;currentIndex=nextIndex;restartTimer()}function transitionDone(next,current){angular.extend(next,{direction:"",active:true,leaving:false,entering:false});angular.extend(current||{},
{direction:"",active:false,leaving:false,entering:false});$scope.$currentTransition=null}};self.indexOfSlide=function(slide){return slides.indexOf(slide)};$scope.next=function(){var newIndex=(currentIndex+1)%slides.length;return self.select(slides[newIndex],"next")};$scope.prev=function(){var newIndex=currentIndex-1<0?slides.length-1:currentIndex-1;return self.select(slides[newIndex],"prev")};$scope.select=function(slide){self.select(slide)};$scope.isActive=function(slide){return self.currentSlide===
slide};$scope.slides=function(){return slides};$scope.$watch("interval",restartTimer);function restartTimer(){if(currentTimeout)$timeout.cancel(currentTimeout);function go(){if(isPlaying){$scope.next();restartTimer()}else $scope.pause()}var interval=+$scope.interval;if(!isNaN(interval)&&interval>=0)currentTimeout=$timeout(go,interval)}$scope.play=function(){if(!isPlaying){isPlaying=true;restartTimer()}};$scope.pause=function(){isPlaying=false;if(currentTimeout)$timeout.cancel(currentTimeout)};self.addSlide=
function(slide,element){slide.$element=element;slides.push(slide);if(slides.length===1||slide.active){self.select(slides[slides.length-1]);if(slides.length==1)$scope.play()}else slide.active=false};self.removeSlide=function(slide){var index=slides.indexOf(slide);slides.splice(index,1);if(slides.length>0&&slide.active)if(index>=slides.length)self.select(slides[index-1]);else self.select(slides[index])}}]).directive("carousel",[function(){return{restrict:"EA",transclude:true,replace:true,controller:"CarouselController",
require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"="}}}]).directive("slide",[function(){return{require:"^carousel",restrict:"EA",transclude:true,replace:true,templateUrl:"template/carousel/slide.html",scope:{active:"="},link:function(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element);scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)});scope.$watch("active",function(active){if(active)carouselCtrl.select(scope)})}}}]);
angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function($transition){var fixUpHeight=function(scope,element,height){element.removeClass("collapse");element.css({height:height});var x=element[0].offsetWidth;element.addClass("collapse")};return{link:function(scope,element,attrs){var isCollapsed;var initialAnimSkip=true;scope.$watch(function(){return element[0].scrollHeight},function(value){if(element[0].scrollHeight!==0)if(!isCollapsed)if(initialAnimSkip)fixUpHeight(scope,
element,element[0].scrollHeight+"px");else fixUpHeight(scope,element,"auto")});scope.$watch(attrs.collapse,function(value){if(value)collapse();else expand()});var currentTransition;var doTransition=function(change){if(currentTransition)currentTransition.cancel();currentTransition=$transition(element,change);currentTransition.then(function(){currentTransition=undefined},function(){currentTransition=undefined});return currentTransition};var expand=function(){if(initialAnimSkip){initialAnimSkip=false;
if(!isCollapsed)fixUpHeight(scope,element,"auto")}else doTransition({height:element[0].scrollHeight+"px"}).then(function(){if(!isCollapsed)fixUpHeight(scope,element,"auto")});isCollapsed=false};var collapse=function(){isCollapsed=true;if(initialAnimSkip){initialAnimSkip=false;fixUpHeight(scope,element,0)}else{fixUpHeight(scope,element,element[0].scrollHeight+"px");doTransition({"height":"0"})}}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);
dialogModule.controller("MessageBoxController",["$scope","dialog","model",function($scope,dialog,model){$scope.title=model.title;$scope.message=model.message;$scope.buttons=model.buttons;$scope.close=function(res){dialog.close(res)}}]);
dialogModule.provider("$dialog",function(){var defaults={backdrop:true,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",dialogOpenClass:"modal-open",resolve:{},backdropFade:false,dialogFade:false,keyboard:true,backdropClick:true};var globalOptions={};var activeBackdrops={value:0};this.options=function(value){globalOptions=value};this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function($http,
$document,$compile,$rootScope,$controller,$templateCache,$q,$transition,$injector){var body=$document.find("body");function createElement(clazz){var el=angular.element("<div>");el.addClass(clazz);return el}function Dialog(opts){var self=this,options=this.options=angular.extend({},defaults,globalOptions,opts);this.backdropEl=createElement(options.backdropClass);if(options.backdropFade){this.backdropEl.addClass(options.transitionClass);this.backdropEl.removeClass(options.triggerClass)}this.modalEl=
createElement(options.dialogClass);if(options.dialogFade){this.modalEl.addClass(options.transitionClass);this.modalEl.removeClass(options.triggerClass)}this.handledEscapeKey=function(e){if(e.which===27){self.close();e.preventDefault();self.$scope.$apply()}};this.handleBackDropClick=function(e){self.close();e.preventDefault();self.$scope.$apply()}}Dialog.prototype.isOpen=function(){return this._open};Dialog.prototype.open=function(templateUrl,controller){var self=this,options=this.options;if(templateUrl)options.templateUrl=
templateUrl;if(controller)options.controller=controller;if(!(options.template||options.templateUrl))throw new Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");this._loadResolves().then(function(locals){var $scope=locals.$scope=self.$scope=locals.$scope?locals.$scope:$rootScope.$new();self.modalEl.html(locals.$template);if(self.options.controller){var ctrl=$controller(self.options.controller,locals);self.modalEl.contents().data("ngControllerController",
ctrl)}$compile(self.modalEl)($scope);self._addElementsToDom();body.addClass(self.options.dialogOpenClass);setTimeout(function(){if(self.options.dialogFade)self.modalEl.addClass(self.options.triggerClass);if(self.options.backdropFade)self.backdropEl.addClass(self.options.triggerClass)});self._bindEvents()});this.deferred=$q.defer();return this.deferred.promise};Dialog.prototype.close=function(result){var self=this;var fadingElements=this._getFadingElements();body.removeClass(self.options.dialogOpenClass);
if(fadingElements.length>0){for(var i=fadingElements.length-1;i>=0;i--)$transition(fadingElements[i],removeTriggerClass).then(onCloseComplete);return}this._onCloseComplete(result);function removeTriggerClass(el){el.removeClass(self.options.triggerClass)}function onCloseComplete(){if(self._open)self._onCloseComplete(result)}};Dialog.prototype._getFadingElements=function(){var elements=[];if(this.options.dialogFade)elements.push(this.modalEl);if(this.options.backdropFade)elements.push(this.backdropEl);
return elements};Dialog.prototype._bindEvents=function(){if(this.options.keyboard)body.bind("keydown",this.handledEscapeKey);if(this.options.backdrop&&this.options.backdropClick)this.backdropEl.bind("click",this.handleBackDropClick)};Dialog.prototype._unbindEvents=function(){if(this.options.keyboard)body.unbind("keydown",this.handledEscapeKey);if(this.options.backdrop&&this.options.backdropClick)this.backdropEl.unbind("click",this.handleBackDropClick)};Dialog.prototype._onCloseComplete=function(result){this._removeElementsFromDom();
this._unbindEvents();this.deferred.resolve(result)};Dialog.prototype._addElementsToDom=function(){body.append(this.modalEl);if(this.options.backdrop){if(activeBackdrops.value===0)body.append(this.backdropEl);activeBackdrops.value++}this._open=true};Dialog.prototype._removeElementsFromDom=function(){this.modalEl.remove();if(this.options.backdrop){activeBackdrops.value--;if(activeBackdrops.value===0)this.backdropEl.remove()}this._open=false};Dialog.prototype._loadResolves=function(){var values=[],keys=
[],templatePromise,self=this;if(this.options.template)templatePromise=$q.when(this.options.template);else if(this.options.templateUrl)templatePromise=$http.get(this.options.templateUrl,{cache:$templateCache}).then(function(response){return response.data});angular.forEach(this.options.resolve||[],function(value,key){keys.push(key);values.push(angular.isString(value)?$injector.get(value):$injector.invoke(value))});keys.push("$template");values.push(templatePromise);return $q.all(values).then(function(values){var locals=
{};angular.forEach(values,function(value,index){locals[keys[index]]=value});locals.dialog=self;return locals})};return{dialog:function(opts){return new Dialog(opts)},messageBox:function(title,message,buttons){return new Dialog({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:title,message:message,buttons:buttons}}}})}}}]});
angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location","$window",function($document,$location,$window){var openElement=null,close;return{restrict:"CA",link:function(scope,element,attrs){scope.$watch(function dropdownTogglePathWatch(){return $location.path()},function dropdownTogglePathWatchAction(){if(close)close()});element.parent().bind("click",function(event){if(close)close()});element.bind("click",function(event){event.preventDefault();event.stopPropagation();
var iWasOpen=false;if(openElement){iWasOpen=openElement===element;close()}if(!iWasOpen){element.parent().addClass("open");openElement=element;close=function(event){if(event){event.preventDefault();event.stopPropagation()}$document.unbind("click",close);element.parent().removeClass("open");close=null;openElement=null};$document.bind("click",close)}})}}}]);
angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function($parse,$dialog){return{restrict:"EA",terminal:true,link:function(scope,elm,attrs){var opts=angular.extend({},scope.$eval(attrs.uiOptions||attrs.bsOptions||attrs.options));var shownExpr=attrs.modal||attrs.show;var setClosed;opts=angular.extend(opts,{template:elm.html(),resolve:{$scope:function(){return scope}}});var dialog=$dialog.dialog(opts);elm.remove();if(attrs.close)setClosed=function(){$parse(attrs.close)(scope)};
else setClosed=function(){if(angular.isFunction($parse(shownExpr).assign))$parse(shownExpr).assign(scope,false)};scope.$watch(shownExpr,function(isShown,oldShown){if(isShown)dialog.open().then(function(){setClosed()});else if(dialog.isOpen())dialog.close()})}}}]);
angular.module("ui.bootstrap.pagination",[]).constant("paginationConfig",{boundaryLinks:false,directionLinks:true,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last"}).directive("pagination",["paginationConfig",function(paginationConfig){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},templateUrl:"template/pagination/pagination.html",replace:true,link:function(scope,element,attrs){var boundaryLinks=angular.isDefined(attrs.boundaryLinks)?
scope.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks;var directionLinks=angular.isDefined(attrs.directionLinks)?scope.$eval(attrs.directionLinks):paginationConfig.directionLinks;var firstText=angular.isDefined(attrs.firstText)?attrs.firstText:paginationConfig.firstText;var previousText=angular.isDefined(attrs.previousText)?attrs.previousText:paginationConfig.previousText;var nextText=angular.isDefined(attrs.nextText)?attrs.nextText:paginationConfig.nextText;var lastText=angular.isDefined(attrs.lastText)?
attrs.lastText:paginationConfig.lastText;function makePage(number,text,isActive,isDisabled){return{number:number,text:text,active:isActive,disabled:isDisabled}}scope.$watch("numPages + currentPage + maxSize",function(){scope.pages=[];var maxSize=scope.maxSize&&scope.maxSize<scope.numPages?scope.maxSize:scope.numPages;var startPage=scope.currentPage-Math.floor(maxSize/2);if(startPage<1)startPage=1;if(startPage+maxSize-1>scope.numPages)startPage=startPage-(startPage+maxSize-1-scope.numPages);for(var number=
startPage,max=startPage+maxSize;number<max;number++){var page=makePage(number,number,scope.isActive(number),false);scope.pages.push(page)}if(directionLinks){var previousPage=makePage(scope.currentPage-1,previousText,false,scope.noPrevious());scope.pages.unshift(previousPage);var nextPage=makePage(scope.currentPage+1,nextText,false,scope.noNext());scope.pages.push(nextPage)}if(boundaryLinks){var firstPage=makePage(1,firstText,false,scope.noPrevious());scope.pages.unshift(firstPage);var lastPage=makePage(scope.numPages,
lastText,false,scope.noNext());scope.pages.push(lastPage)}if(scope.currentPage>scope.numPages)scope.selectPage(scope.numPages)});scope.noPrevious=function(){return scope.currentPage===1};scope.noNext=function(){return scope.currentPage===scope.numPages};scope.isActive=function(page){return scope.currentPage===page};scope.selectPage=function(page){if(!scope.isActive(page)&&page>0&&page<=scope.numPages){scope.currentPage=page;scope.onSelectPage({page:page})}}}}}]);
angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:true,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function($compile,$timeout,$parse,$window,$tooltip){return $tooltip("popover","click")}]);
angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:true,autoType:false,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function($scope,$attrs,progressConfig){var animate=angular.isDefined($attrs.animate)?$scope.$eval($attrs.animate):progressConfig.animate;var autoType=angular.isDefined($attrs.autoType)?$scope.$eval($attrs.autoType):progressConfig.autoType;var stackedTypes=
angular.isDefined($attrs.stackedTypes)?$scope.$eval("["+$attrs.stackedTypes+"]"):progressConfig.stackedTypes;this.makeBar=function(newBar,oldBar,index){var newValue=angular.isObject(newBar)?newBar.value:newBar||0;var oldValue=angular.isObject(oldBar)?oldBar.value:oldBar||0;var type=angular.isObject(newBar)&&angular.isDefined(newBar.type)?newBar.type:autoType?getStackedType(index||0):null;return{from:oldValue,to:newValue,type:type,animate:animate}};function getStackedType(index){return stackedTypes[index]}
this.addBar=function(bar){$scope.bars.push(bar);$scope.totalPercent+=bar.to};this.clearBars=function(){$scope.bars=[];$scope.totalPercent=0};this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:true,controller:"ProgressBarController",scope:{value:"=",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(scope,element,attrs,controller){scope.$watch("value",function(newValue,oldValue){controller.clearBars();if(angular.isArray(newValue))for(var i=
0,n=newValue.length;i<n;i++)controller.addBar(controller.makeBar(newValue[i],oldValue[i],i));else controller.addBar(controller.makeBar(newValue,oldValue))},true);scope.$watch("totalPercent",function(value){if(value>=100)scope.onFull();else if(value<=0)scope.onEmpty()},true)}}}).directive("progressbar",["$transition",function($transition){return{restrict:"EA",replace:true,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(scope,element){scope.$watch("width",
function(value){if(scope.animate){element.css("width",scope.old+"%");$transition(element,{width:value+"%"})}else element.css("width",value+"%")})}}}]);
angular.module("ui.bootstrap.tabs",[]).controller("TabsController",["$scope","$element",function($scope,$element){var panes=$scope.panes=[];this.select=$scope.select=function selectPane(pane){angular.forEach(panes,function(pane){pane.selected=false});pane.selected=true};this.addPane=function addPane(pane){if(!panes.length)$scope.select(pane);panes.push(pane)};this.removePane=function removePane(pane){var index=panes.indexOf(pane);panes.splice(index,1);if(pane.selected&&panes.length>0)$scope.select(panes[index<
panes.length?index:index-1])}}]).directive("tabs",function(){return{restrict:"EA",transclude:true,scope:{},controller:"TabsController",templateUrl:"template/tabs/tabs.html",replace:true}}).directive("pane",["$parse",function($parse){return{require:"^tabs",restrict:"EA",transclude:true,scope:{heading:"@"},link:function(scope,element,attrs,tabsCtrl){var getSelected,setSelected;scope.selected=false;if(attrs.active){getSelected=$parse(attrs.active);setSelected=getSelected.assign;scope.$watch(function watchSelected(){return getSelected(scope.$parent)},
function updateSelected(value){scope.selected=value});scope.selected=getSelected?getSelected(scope.$parent):false}scope.$watch("selected",function(selected){if(selected)tabsCtrl.select(scope);if(setSelected)setSelected(scope.$parent,selected)});tabsCtrl.addPane(scope);scope.$on("$destroy",function(){tabsCtrl.removePane(scope)})},templateUrl:"template/tabs/pane.html",replace:true}}]);
angular.module("ui.bootstrap.tooltip",[]).provider("$tooltip",function(){var defaultOptions={placement:"top",animation:true};var globalOptions={};this.options=function(value){angular.extend(globalOptions,value)};this.$get=["$window","$compile","$timeout","$parse",function($window,$compile,$timeout,$parse){return function $tooltip(type,defaultTriggerShow,defaultTriggerHide){var options=angular.extend({},defaultOptions,globalOptions);var template="<"+type+"-popup "+'title="{{tt_title}}" '+'content="{{tt_content}}" '+
'placement="{{tt_placement}}" '+'animation="tt_animation()" '+'is-open="tt_isOpen"'+">"+"</"+type+"-popup>";function getPosition(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:element.prop("offsetWidth"),height:element.prop("offsetHeight"),top:boundingClientRect.top+$window.pageYOffset,left:boundingClientRect.left+$window.pageXOffset}}return{restrict:"EA",scope:true,link:function link(scope,element,attrs){var tooltip=$compile(template)(scope),transitionTimeout;attrs.$observe(type,
function(val){scope.tt_content=val});attrs.$observe(type+"Title",function(val){scope.tt_title=val});attrs.$observe(type+"Placement",function(val){scope.tt_placement=angular.isDefined(val)?val:options.placement});attrs.$observe(type+"Animation",function(val){scope.tt_animation=angular.isDefined(val)?$parse(val):function(){return options.animation}});scope.tt_isOpen=false;function show(){var position,ttWidth,ttHeight,ttPosition;if(!scope.tt_content)return;if(transitionTimeout)$timeout.cancel(transitionTimeout);
tooltip.css({top:0,left:0,display:"block"});element.after(tooltip);position=getPosition(element);ttWidth=tooltip.prop("offsetWidth");ttHeight=tooltip.prop("offsetHeight");switch(scope.tt_placement){case "right":ttPosition={top:position.top+position.height/2-ttHeight/2+"px",left:position.left+position.width+"px"};break;case "bottom":ttPosition={top:position.top+position.height+"px",left:position.left+position.width/2-ttWidth/2+"px"};break;case "left":ttPosition={top:position.top+position.height/2-
ttHeight/2+"px",left:position.left-ttWidth+"px"};break;default:ttPosition={top:position.top-ttHeight+"px",left:position.left+position.width/2-ttWidth/2+"px"};break}tooltip.css(ttPosition);scope.tt_isOpen=true}function hide(){scope.tt_isOpen=false;if(angular.isDefined(scope.tt_animation)&&scope.tt_animation())transitionTimeout=$timeout(function(){tooltip.remove()},500);else tooltip.remove()}if(!angular.isDefined(defaultTriggerHide))element.bind(defaultTriggerShow,function toggleTooltipBind(){if(!scope.tt_isOpen)scope.$apply(show);
else scope.$apply(hide)});else{element.bind(defaultTriggerShow,function showTooltipBind(){scope.$apply(show)});element.bind(defaultTriggerHide,function hideTooltipBind(){scope.$apply(hide)})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","mouseenter","mouseleave")}]);
angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer();var endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"];var transitionEndHandler=function(event){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler);deferred.resolve(element)})};if(endEventName)element.bind(endEventName,
transitionEndHandler);$timeout(function(){if(angular.isString(trigger))element.addClass(trigger);else if(angular.isFunction(trigger))trigger(element);else if(angular.isObject(trigger))element.css(trigger);if(!endEventName)deferred.resolve(element)});deferred.promise.cancel=function(){if(endEventName)element.unbind(endEventName,transitionEndHandler);deferred.reject("Transition cancelled")};return deferred.promise};var transElement=document.createElement("trans");var transitionEndEventNames={"WebkitTransition":"webkitTransitionEnd",
"MozTransition":"transitionend","OTransition":"oTransitionEnd","msTransition":"MSTransitionEnd","transition":"transitionend"};var animationEndEventNames={"WebkitTransition":"webkitAnimationEnd","MozTransition":"animationend","OTransition":"oAnimationEnd","msTransition":"MSAnimationEnd","transition":"animationend"};function findEndEventName(endEventNames){for(var name in endEventNames)if(transElement.style[name]!==undefined)return endEventNames[name]}$transition.transitionEndEventName=findEndEventName(transitionEndEventNames);
$transition.animationEndEventName=findEndEventName(animationEndEventNames);return $transition}]);
angular.module("ui.bootstrap.typeahead",[]).factory("typeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP),modelMapper,viewMapper,source;if(!match)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_'"+" but got '"+input+"'.");return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||
match[1]),modelMapper:$parse(match[1])}}}}]).directive("typeahead",["$compile","$q","$document","typeaheadParser",function($compile,$q,$document,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];return{require:"ngModel",link:function(originalScope,element,attrs,modelCtrl){var selected=modelCtrl.$modelValue;var minSearch=originalScope.$eval(attrs.typeaheadMinLength)||1;var parserResult=typeaheadParser.parse(attrs.typeahead);var scope=originalScope.$new();originalScope.$on("$destroy",function(){scope.$destroy()});
var resetMatches=function(){scope.matches=[];scope.activeIdx=-1};var getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};$q.when(parserResult.source(scope,locals)).then(function(matches){if(inputValue===modelCtrl.$viewValue)if(matches.length>0){scope.activeIdx=0;scope.matches.length=0;for(var i=0;i<matches.length;i++){locals[parserResult.itemName]=matches[i];scope.matches.push({label:parserResult.viewMapper(scope,locals),model:matches[i]})}scope.query=inputValue}else resetMatches()},
resetMatches)};resetMatches();scope.query=undefined;modelCtrl.$parsers.push(function(inputValue){resetMatches();if(selected)return inputValue;else if(inputValue&&inputValue.length>=minSearch)getMatchesAsync(inputValue);return undefined});modelCtrl.$render=function(){var locals={};locals[parserResult.itemName]=selected;element.val(parserResult.viewMapper(scope,locals)||modelCtrl.$viewValue);selected=undefined};scope.select=function(activeIdx){var locals={};locals[parserResult.itemName]=selected=scope.matches[activeIdx].model;
modelCtrl.$setViewValue(parserResult.modelMapper(scope,locals));modelCtrl.$render()};element.bind("keydown",function(evt){if(scope.matches.length===0||HOT_KEYS.indexOf(evt.which)===-1)return;evt.preventDefault();if(evt.which===40){scope.activeIdx=(scope.activeIdx+1)%scope.matches.length;scope.$digest()}else if(evt.which===38){scope.activeIdx=(scope.activeIdx?scope.activeIdx:scope.matches.length)-1;scope.$digest()}else if(evt.which===13||evt.which===9)scope.$apply(function(){scope.select(scope.activeIdx)});
else if(evt.which===27){evt.stopPropagation();scope.matches=[];scope.$digest()}});$document.find("body").bind("click",function(){scope.matches=[];scope.$digest()});var tplElCompiled=$compile("<typeahead-popup matches='matches' active='activeIdx' select='select(activeIdx)' "+"query='query'></typeahead-popup>")(scope);element.after(tplElCompiled)}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",select:"&"},replace:true,templateUrl:"template/typeahead/typeahead.html",
link:function(scope,element,attrs){scope.isOpen=function(){return scope.matches.length>0};scope.isActive=function(matchIdx){return scope.active==matchIdx};scope.selectActive=function(matchIdx){scope.active=matchIdx};scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).filter("typeaheadHighlight",function(){return function(matchItem,query){return query?matchItem.replace(new RegExp(query,"gi"),"<strong>$&</strong>"):query}});
angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html",'<div class="accordion-group">'+'  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>'+'  <div class="accordion-body" collapse="!isOpen">'+'    <div class="accordion-inner" ng-transclude></div>  </div>'+"</div>")}]);
angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]);
angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>"+"    <button type='button' class='close' ng-click='close()'>&times;</button>"+"    <div ng-transclude></div>"+"</div>")}]);
angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">'+'    <ol class="carousel-indicators" ng-show="slides().length > 1">'+'        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>'+"    </ol>"+'    <div class="carousel-inner" ng-transclude></div>'+'    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>'+
'    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>'+"</div>"+"")}]);
angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html",'<div ng-class="{'+"    'active': leaving || (active && !entering),"+"    'prev': (next || active) && direction=='prev',"+"    'next': (next || active) && direction=='next',"+"    'right': direction=='prev',"+"    'left': direction=='next'"+'  }" class="item" ng-transclude></div>'+"")}]);
angular.module("template/dialog/message.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/dialog/message.html",'<div class="modal-header">'+"\t<h1>{{ title }}</h1>"+"</div>"+'<div class="modal-body">'+"\t<p>{{ message }}</p>"+"</div>"+'<div class="modal-footer">'+'\t<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class=btn ng-class="btn.cssClass">{{ btn.label }}</button>'+"</div>"+"")}]);
angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",'<div class="pagination"><ul>'+'  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>'+"  </ul>"+"</div>"+"")}]);
angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">'+'  <div class="arrow"></div>'+""+'  <div class="popover-inner">'+'      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>'+'      <div class="popover-content" ng-bind="content"></div>'+"  </div>"+"</div>"+"")}]);
angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",'<div class="bar" ng-class=\'type && "bar-" + type\'></div>')}]);angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>')}]);
angular.module("template/tabs/pane.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>'+"")}]);
angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabs.html",'<div class="tabbable">'+'  <ul class="nav nav-tabs">'+'    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">'+'      <a ng-click="select(pane)">{{pane.heading}}</a>'+"    </li>"+"  </ul>"+'  <div class="tab-content" ng-transclude></div>'+"</div>"+"")}]);
angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">'+'  <div class="tooltip-arrow"></div>'+'  <div class="tooltip-inner" ng-bind="content"></div>'+"</div>"+"")}]);
angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead.html",'<div class="dropdown clearfix" ng-class="{open: isOpen()}">'+'    <ul class="typeahead dropdown-menu">'+'        <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">'+'            <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>'+
"        </li>"+"    </ul>"+"</div>")}]);!function($){var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;triggers=this.options.trigger.split(" ");for(i=triggers.length;i--;){trigger=triggers[i];if(trigger=="click")this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!=
"manual"){eventIn=trigger=="hover"?"mouseenter":"focus";eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options);if(options.delay&&
typeof options.delay=="number")options.delay={show:options.delay,hide:options.delay};return options},enter:function(e){var defaults=$.fn[this.type].defaults,options={},self;this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value},this);self=$(e.currentTarget)[this.type](options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState==
"in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(e);
if(e.isDefaultPrevented())return;$tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;$tip.detach().css({top:0,left:0,display:"block"});this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);pos=this.getPosition();actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(placement){case "bottom":tp=
{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case "top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case "left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case "right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}this.applyPlacement(tp,placement);this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,
actualWidth,actualHeight,delta,replace;$tip.offset(offset).addClass(placement).addClass("in");actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight;replace=true}if(placement=="bottom"||placement=="top"){delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,
"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");if(replace)$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip(),e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;
$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.detach()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string")$e.attr("data-original-title",$e.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},
arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+
this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
trigger:"hover focus",title:"",delay:0,html:false,container:false};$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(window.jQuery);(function(){var toPixels=function(widthValue){var px;switch(widthValue){case "thin":px="2px";break;case "medium":px="4px";break;case "thick":px="6px";break;default:px=widthValue}return px};var getBorderWidths=function(h){var computedStyle;var bw={};if(document.defaultView&&document.defaultView.getComputedStyle){computedStyle=h.ownerDocument.defaultView.getComputedStyle(h,"");if(computedStyle){bw.top=parseInt(computedStyle.borderTopWidth,10)||0;bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||
0;bw.left=parseInt(computedStyle.borderLeftWidth,10)||0;bw.right=parseInt(computedStyle.borderRightWidth,10)||0;return bw}}else if(document.documentElement.currentStyle)if(h.currentStyle){bw.top=parseInt(toPixels(h.currentStyle.borderTopWidth),10)||0;bw.bottom=parseInt(toPixels(h.currentStyle.borderBottomWidth),10)||0;bw.left=parseInt(toPixels(h.currentStyle.borderLeftWidth),10)||0;bw.right=parseInt(toPixels(h.currentStyle.borderRightWidth),10)||0;return bw}bw.top=parseInt(h.style["border-top-width"],
10)||0;bw.bottom=parseInt(h.style["border-bottom-width"],10)||0;bw.left=parseInt(h.style["border-left-width"],10)||0;bw.right=parseInt(h.style["border-right-width"],10)||0;return bw};var scroll={x:0,y:0};var getScrollValue=function(e){scroll.x=typeof document.documentElement.scrollLeft!=="undefined"?document.documentElement.scrollLeft:document.body.scrollLeft;scroll.y=typeof document.documentElement.scrollTop!=="undefined"?document.documentElement.scrollTop:document.body.scrollTop};getScrollValue();
var getMousePosition=function(e){var posX=0,posY=0;e=e||window.event;if(typeof e.pageX!=="undefined"){posX=e.pageX;posY=e.pageY}else if(typeof e.clientX!=="undefined"){posX=e.clientX+scroll.x;posY=e.clientY+scroll.y}return{left:posX,top:posY}};var getElementPosition=function(h){var posX=h.offsetLeft;var posY=h.offsetTop;var parent=h.offsetParent;while(parent!==null){if(parent!==document.body&&parent!==document.documentElement){posX-=parent.scrollLeft;posY-=parent.scrollTop}var m=parent;var moffx=
m.offsetLeft;var moffy=m.offsetTop;if(!moffx&&!moffy&&window.getComputedStyle){var matrix=document.defaultView.getComputedStyle(m,null).MozTransform||document.defaultView.getComputedStyle(m,null).WebkitTransform;if(matrix)if(typeof matrix==="string"){var parms=matrix.split(",");moffx+=parseInt(parms[4],10)||0;moffy+=parseInt(parms[5],10)||0}}posX+=moffx;posY+=moffy;parent=parent.offsetParent}return{left:posX,top:posY}};var setVals=function(obj,vals){if(obj&&vals)for(var x in vals)if(vals.hasOwnProperty(x))obj[x]=
vals[x];return obj};var setOpacity=function(h,op){if(typeof op!=="undefined")h.style.opacity=op;if(typeof h.style.opacity!=="undefined"&&h.style.opacity!=="")h.style.filter="alpha(opacity="+h.style.opacity*100+")"};function DragZoom(map,opt_zoomOpts){var me=this;var ov=new google.maps.OverlayView;ov.onAdd=function(){me.init_(map,opt_zoomOpts)};ov.draw=function(){};ov.onRemove=function(){};ov.setMap(map);this.prjov_=ov}DragZoom.prototype.init_=function(map,opt_zoomOpts){var i;var me=this;this.map_=
map;opt_zoomOpts=opt_zoomOpts||{};this.key_=opt_zoomOpts.key||"shift";this.key_=this.key_.toLowerCase();this.borderWidths_=getBorderWidths(this.map_.getDiv());this.veilDiv_=[];for(i=0;i<4;i++){this.veilDiv_[i]=document.createElement("div");this.veilDiv_[i].onselectstart=function(){return false};setVals(this.veilDiv_[i].style,{backgroundColor:"gray",opacity:0.25,cursor:"crosshair"});setVals(this.veilDiv_[i].style,opt_zoomOpts.paneStyle);setVals(this.veilDiv_[i].style,opt_zoomOpts.veilStyle);setVals(this.veilDiv_[i].style,
{position:"absolute",overflow:"hidden",display:"none"});if(this.key_==="shift")this.veilDiv_[i].style.MozUserSelect="none";setOpacity(this.veilDiv_[i]);if(this.veilDiv_[i].style.backgroundColor==="transparent"){this.veilDiv_[i].style.backgroundColor="white";setOpacity(this.veilDiv_[i],0)}this.map_.getDiv().appendChild(this.veilDiv_[i])}this.noZoom_=opt_zoomOpts.noZoom||false;this.visualEnabled_=opt_zoomOpts.visualEnabled||false;this.visualClass_=opt_zoomOpts.visualClass||"";this.visualPosition_=opt_zoomOpts.visualPosition||
google.maps.ControlPosition.LEFT_TOP;this.visualPositionOffset_=opt_zoomOpts.visualPositionOffset||new google.maps.Size(35,0);this.visualPositionIndex_=opt_zoomOpts.visualPositionIndex||null;this.visualSprite_=opt_zoomOpts.visualSprite||"http"+(document.location.protocol==="https:"?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png";this.visualSize_=opt_zoomOpts.visualSize||new google.maps.Size(20,20);this.visualTips_=opt_zoomOpts.visualTips||{};this.visualTips_.off=this.visualTips_.off||
"Turn on drag zoom mode";this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode";this.boxDiv_=document.createElement("div");setVals(this.boxDiv_.style,{border:"4px solid #736AFF"});setVals(this.boxDiv_.style,opt_zoomOpts.boxStyle);setVals(this.boxDiv_.style,{position:"absolute",display:"none"});setOpacity(this.boxDiv_);this.map_.getDiv().appendChild(this.boxDiv_);this.boxBorderWidths_=getBorderWidths(this.boxDiv_);this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(e){me.onKeyDown_(e)}),
google.maps.event.addDomListener(document,"keyup",function(e){me.onKeyUp_(e)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(document,
"mousedown",function(e){me.onMouseDownDocument_(e)}),google.maps.event.addDomListener(document,"mousemove",function(e){me.onMouseMove_(e)}),google.maps.event.addDomListener(document,"mouseup",function(e){me.onMouseUp_(e)}),google.maps.event.addDomListener(window,"scroll",getScrollValue)];this.hotKeyDown_=false;this.mouseDown_=false;this.dragging_=false;this.startPt_=null;this.endPt_=null;this.mapWidth_=null;this.mapHeight_=null;this.mousePosn_=null;this.mapPosn_=null;if(this.visualEnabled_){this.buttonDiv_=
this.initControl_(this.visualPositionOffset_);if(this.visualPositionIndex_!==null)this.buttonDiv_.index=this.visualPositionIndex_;this.map_.controls[this.visualPosition_].push(this.buttonDiv_);this.controlIndex_=this.map_.controls[this.visualPosition_].length-1}};DragZoom.prototype.initControl_=function(offset){var control;var image;var me=this;control=document.createElement("div");control.className=this.visualClass_;control.style.position="relative";control.style.overflow="hidden";control.style.height=
this.visualSize_.height+"px";control.style.width=this.visualSize_.width+"px";control.title=this.visualTips_.off;image=document.createElement("img");image.src=this.visualSprite_;image.style.position="absolute";image.style.left=-(this.visualSize_.width*2)+"px";image.style.top=0+"px";control.appendChild(image);control.onclick=function(e){me.hotKeyDown_=!me.hotKeyDown_;if(me.hotKeyDown_){me.buttonDiv_.firstChild.style.left=-(me.visualSize_.width*0)+"px";me.buttonDiv_.title=me.visualTips_.on;me.activatedByControl_=
true;google.maps.event.trigger(me,"activate")}else{me.buttonDiv_.firstChild.style.left=-(me.visualSize_.width*2)+"px";me.buttonDiv_.title=me.visualTips_.off;google.maps.event.trigger(me,"deactivate")}me.onMouseMove_(e)};control.onmouseover=function(){me.buttonDiv_.firstChild.style.left=-(me.visualSize_.width*1)+"px"};control.onmouseout=function(){if(me.hotKeyDown_){me.buttonDiv_.firstChild.style.left=-(me.visualSize_.width*0)+"px";me.buttonDiv_.title=me.visualTips_.on}else{me.buttonDiv_.firstChild.style.left=
-(me.visualSize_.width*2)+"px";me.buttonDiv_.title=me.visualTips_.off}};control.ondragstart=function(){return false};setVals(control.style,{cursor:"pointer",marginTop:offset.height+"px",marginLeft:offset.width+"px"});return control};DragZoom.prototype.isHotKeyDown_=function(e){var isHot;e=e||window.event;isHot=e.shiftKey&&this.key_==="shift"||e.altKey&&this.key_==="alt"||e.ctrlKey&&this.key_==="ctrl";if(!isHot)switch(e.keyCode){case 16:if(this.key_==="shift")isHot=true;break;case 17:if(this.key_===
"ctrl")isHot=true;break;case 18:if(this.key_==="alt")isHot=true;break}return isHot};DragZoom.prototype.isMouseOnMap_=function(){var mousePosn=this.mousePosn_;if(mousePosn){var mapPosn=this.mapPosn_;var mapDiv=this.map_.getDiv();return mousePosn.left>mapPosn.left&&mousePosn.left<mapPosn.left+mapDiv.offsetWidth&&mousePosn.top>mapPosn.top&&mousePosn.top<mapPosn.top+mapDiv.offsetHeight}else return false};DragZoom.prototype.setVeilVisibility_=function(){var i;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var mapDiv=
this.map_.getDiv();this.mapWidth_=mapDiv.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right);this.mapHeight_=mapDiv.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom);if(this.activatedByControl_){var left=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width;var top=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height;var width=this.visualSize_.width;var height=this.visualSize_.height;this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.left=
"0px";this.veilDiv_[0].style.width=left+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";this.veilDiv_[1].style.top="0px";this.veilDiv_[1].style.left=left+width+"px";this.veilDiv_[1].style.width=this.mapWidth_-(left+width)+"px";this.veilDiv_[1].style.height=this.mapHeight_+"px";this.veilDiv_[2].style.top="0px";this.veilDiv_[2].style.left=left+"px";this.veilDiv_[2].style.width=width+"px";this.veilDiv_[2].style.height=top+"px";this.veilDiv_[3].style.top=top+height+"px";this.veilDiv_[3].style.left=
left+"px";this.veilDiv_[3].style.width=width+"px";this.veilDiv_[3].style.height=this.mapHeight_-(top+height)+"px";for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="block"}else{this.veilDiv_[0].style.left="0px";this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.width=this.mapWidth_+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";for(i=1;i<this.veilDiv_.length;i++){this.veilDiv_[i].style.width="0px";this.veilDiv_[i].style.height="0px"}for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display=
"block"}}else for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="none"};DragZoom.prototype.onKeyDown_=function(e){if(this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(e)){this.mapPosn_=getElementPosition(this.map_.getDiv());this.hotKeyDown_=true;this.activatedByControl_=false;this.setVeilVisibility_();google.maps.event.trigger(this,"activate")}};DragZoom.prototype.getMousePoint_=function(e){var mousePosn=getMousePosition(e);var p=new google.maps.Point;p.x=mousePosn.left-this.mapPosn_.left-
this.borderWidths_.left;p.y=mousePosn.top-this.mapPosn_.top-this.borderWidths_.top;p.x=Math.min(p.x,this.mapWidth_);p.y=Math.min(p.y,this.mapHeight_);p.x=Math.max(p.x,0);p.y=Math.max(p.y,0);return p};DragZoom.prototype.onMouseDown_=function(e){if(this.map_&&this.hotKeyDown_){this.mapPosn_=getElementPosition(this.map_.getDiv());this.dragging_=true;this.startPt_=this.endPt_=this.getMousePoint_(e);this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var prj=this.prjov_.getProjection();var latlng=
prj.fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",latlng)}};DragZoom.prototype.onMouseDownDocument_=function(e){this.mouseDown_=true};DragZoom.prototype.onMouseMove_=function(e){this.mousePosn_=getMousePosition(e);if(this.dragging_){this.endPt_=this.getMousePoint_(e);var left=Math.min(this.startPt_.x,this.endPt_.x);var top=Math.min(this.startPt_.y,this.endPt_.y);var width=Math.abs(this.startPt_.x-this.endPt_.x);var height=Math.abs(this.startPt_.y-this.endPt_.y);
var boxWidth=Math.max(0,width-(this.boxBorderWidths_.left+this.boxBorderWidths_.right));var boxHeight=Math.max(0,height-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.left="0px";this.veilDiv_[0].style.width=left+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";this.veilDiv_[1].style.top="0px";this.veilDiv_[1].style.left=left+width+"px";this.veilDiv_[1].style.width=this.mapWidth_-(left+width)+"px";this.veilDiv_[1].style.height=
this.mapHeight_+"px";this.veilDiv_[2].style.top="0px";this.veilDiv_[2].style.left=left+"px";this.veilDiv_[2].style.width=width+"px";this.veilDiv_[2].style.height=top+"px";this.veilDiv_[3].style.top=top+height+"px";this.veilDiv_[3].style.left=left+"px";this.veilDiv_[3].style.width=width+"px";this.veilDiv_[3].style.height=this.mapHeight_-(top+height)+"px";this.boxDiv_.style.top=top+"px";this.boxDiv_.style.left=left+"px";this.boxDiv_.style.width=boxWidth+"px";this.boxDiv_.style.height=boxHeight+"px";
this.boxDiv_.style.display="block";google.maps.event.trigger(this,"drag",new google.maps.Point(left,top+height),new google.maps.Point(left+width,top),this.prjov_.getProjection())}else if(!this.mouseDown_){this.mapPosn_=getElementPosition(this.map_.getDiv());this.setVeilVisibility_()}};DragZoom.prototype.onMouseUp_=function(e){var z;var me=this;this.mouseDown_=false;if(this.dragging_){if(this.getMousePoint_(e).x===this.startPt_.x&&this.getMousePoint_(e).y===this.startPt_.y){this.onKeyUp_(e);return}var left=
Math.min(this.startPt_.x,this.endPt_.x);var top=Math.min(this.startPt_.y,this.endPt_.y);var width=Math.abs(this.startPt_.x-this.endPt_.x);var height=Math.abs(this.startPt_.y-this.endPt_.y);var kGoogleCenteringBug=true;if(kGoogleCenteringBug){left+=this.borderWidths_.left;top+=this.borderWidths_.top}var prj=this.prjov_.getProjection();var sw=prj.fromContainerPixelToLatLng(new google.maps.Point(left,top+height));var ne=prj.fromContainerPixelToLatLng(new google.maps.Point(left+width,top));var bnds=new google.maps.LatLngBounds(sw,
ne);if(this.noZoom_)this.boxDiv_.style.display="none";else{z=this.map_.getZoom();this.map_.fitBounds(bnds);if(this.map_.getZoom()<z)this.map_.setZoom(z);var swPt=prj.fromLatLngToContainerPixel(sw);var nePt=prj.fromLatLngToContainerPixel(ne);if(kGoogleCenteringBug){swPt.x-=this.borderWidths_.left;swPt.y-=this.borderWidths_.top;nePt.x-=this.borderWidths_.left;nePt.y-=this.borderWidths_.top}this.boxDiv_.style.left=swPt.x+"px";this.boxDiv_.style.top=nePt.y+"px";this.boxDiv_.style.width=Math.abs(nePt.x-
swPt.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px";this.boxDiv_.style.height=Math.abs(nePt.y-swPt.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px";setTimeout(function(){me.boxDiv_.style.display="none"},1E3)}this.dragging_=false;this.onMouseMove_(e);google.maps.event.trigger(this,"dragend",bnds);if(!this.isHotKeyDown_(e))this.onKeyUp_(e)}};DragZoom.prototype.onKeyUp_=function(e){var i;var left,top,width,height,prj,sw,ne;var bnds=null;if(this.map_&&this.hotKeyDown_){this.hotKeyDown_=
false;if(this.dragging_){this.boxDiv_.style.display="none";this.dragging_=false;left=Math.min(this.startPt_.x,this.endPt_.x);top=Math.min(this.startPt_.y,this.endPt_.y);width=Math.abs(this.startPt_.x-this.endPt_.x);height=Math.abs(this.startPt_.y-this.endPt_.y);prj=this.prjov_.getProjection();sw=prj.fromContainerPixelToLatLng(new google.maps.Point(left,top+height));ne=prj.fromContainerPixelToLatLng(new google.maps.Point(left+width,top));bnds=new google.maps.LatLngBounds(sw,ne)}for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display=
"none";if(this.visualEnabled_){this.buttonDiv_.firstChild.style.left=-(this.visualSize_.width*2)+"px";this.buttonDiv_.title=this.visualTips_.off;this.buttonDiv_.style.display=""}google.maps.event.trigger(this,"deactivate",bnds)}};google.maps.Map.prototype.enableKeyDragZoom=function(opt_zoomOpts){this.dragZoom_=new DragZoom(this,opt_zoomOpts)};google.maps.Map.prototype.disableKeyDragZoom=function(){var i;var d=this.dragZoom_;if(d){for(i=0;i<d.listeners_.length;++i)google.maps.event.removeListener(d.listeners_[i]);
this.getDiv().removeChild(d.boxDiv_);for(i=0;i<d.veilDiv_.length;i++)this.getDiv().removeChild(d.veilDiv_[i]);if(d.visualEnabled_)this.controls[d.visualPosition_].removeAt(d.controlIndex_);d.prjov_.setMap(null);this.dragZoom_=null}};google.maps.Map.prototype.keyDragZoomEnabled=function(){return this.dragZoom_!==null};google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}})();(function(){angular.module("hutmap",["hutmapServices","hutmapFilters","google-maps","ngResource","$strap.directives","ui.bootstrap"])})();(function(){angular.module("google-maps",[]).value("googleMapsDefaults",{"mapOptions":{zoom:8,center:new google.maps.LatLng(46.87916,-120),mapTypeId:google.maps.MapTypeId.ROADMAP}})})();(function(){angular.module("google-maps").directive("gmMarkers",["$log","$parse","$timeout","googleMapsUtils",function($log,$parse,$timeout,googleMapsUtils){var latLngEqual=googleMapsUtils.latLngEqual;var objToLatLng=googleMapsUtils.objToLatLng;function link(scope,element,attrs,controller){if(!("gmObjects"in attrs))throw"gmObjects attribute required";else if(!("gmGetLatLng"in attrs))throw"gmGetLatLng attribute required";var handlers={};angular.forEach(attrs,function(value,key){if(key.lastIndexOf("gmOn",
0)===0){var event=angular.lowercase(key.substring(4));var fn=$parse(value);handlers[event]=fn}});var updateMarkers=function(objects){var markerOptions=scope.gmMarkerOptions();var objectHash={};angular.forEach(objects,function(object,i){var latLngObj=scope.gmGetLatLng({object:object});var position=objToLatLng(latLngObj);if(position==null)return;var hash=position.toUrlValue(controller.precision);objectHash[hash]=object;if(!controller.hasMarker(latLngObj.lat,latLngObj.lng)){var options={};angular.extend(options,
markerOptions,{position:position});controller.addMarker(options);var marker=controller.getMarker(latLngObj.lat,latLngObj.lng);angular.forEach(handlers,function(handler,event){controller.addListener(marker,event,function(){$timeout(function(){handler(scope.$parent.$parent,{object:object,marker:marker})})})})}});var orphaned=[];controller.forEachMarker(function(marker){var markerPosition=marker.getPosition();var hash=markerPosition.toUrlValue(controller.precision);if(!(hash in objectHash))orphaned.push(marker)});
angular.forEach(orphaned,function(marker,i){var position=marker.getPosition();controller.removeMarker(position.lat(),position.lng())})};scope.$watch("gmObjects().length",function(newValue,oldValue){if(newValue!=null&&newValue!==oldValue)updateMarkers(scope.gmObjects())});scope.$watch("gmObjects()",function(newValue,oldValue){if(newValue!=null&&newValue!==oldValue)updateMarkers(scope.gmObjects())});scope.$watch("gmEvent()",function(newValue,oldValue){if(newValue!=null&&newValue!==oldValue){var event=
newValue.event;var location=newValue.location;var marker=controller.getMarker(location.lat(),location.lng());if(marker!=null)$timeout(angular.bind(this,controller.trigger,marker,event))}});$timeout(angular.bind(this,updateMarkers,scope.gmObjects()))}return{restrict:"AE",priority:100,scope:{gmObjects:"&",gmGetLatLng:"&",gmMarkerOptions:"&",gmEvent:"&"},require:"^gmMap",link:link}}])})();(function(){angular.module("google-maps").factory("googleMapControllerFactory",["googleMapsUtils","googleMapsDefaults","googleMapsContainer",function(googleMapsUtils,googleMapsDefaults,googleMapsContainer){var latLngEqual=googleMapsUtils.latLngEqual;var boundsEqual=googleMapsUtils.boundsEqual;var hasNaN=googleMapsUtils.hasNaN;var gMDefaults=googleMapsDefaults;var gMContainer=googleMapsContainer;var MapController=function($scope,$element,$attrs){var mapId=$scope.gmMapId();if(!mapId)throw"googleMap must have non-empty gmMapId attribute";
var mapDiv=$element.find("[id]");mapDiv.attr("id",mapId);var config=this._getConfig($scope,gMDefaults);this._map=this._createMap(mapId,mapDiv,config,gMContainer);this._markers={};this.dragging=false;Object.defineProperties(this,{"precision":{value:MapController.precision,writeable:false},"center":{configurable:true,get:function(){return this._map.getCenter()},set:function(center){if(hasNaN(center))throw"center contains null or NaN";var changed=!latLngEqual(this.center,center);if(changed)this._map.panTo(center)}},
"zoom":{configurable:true,get:function(){return this._map.getZoom()},set:function(zoom){if(!(zoom!=null&&!isNaN(zoom)))throw"zoom was null or NaN";var changed=this.zoom!==zoom;if(changed)this._map.setZoom(zoom)}},"bounds":{configurable:true,get:function(){return this._map.getBounds()},set:function(bounds){var numbers=!hasNaN(bounds.getSouthWest())&&!hasNaN(bounds.getNorthEast());if(!numbers)throw"bounds contains null or NaN";var changed=!boundsEqual(this.bounds,bounds);if(changed)this._map.fitBounds(bounds)}}});
this._initDragListeners();$scope.$on("$destroy",angular.bind(this,this._destroy,mapId))};MapController.precision=3;MapController.prototype._getConfig=function($scope,gMDefaults){var defaults=gMDefaults.mapOptions;var config={};angular.extend(config,defaults,$scope.gmMapOptions());return config};MapController.prototype._createMap=function(id,element,config,gMContainer){var map=gMContainer.getMap(id);if(!map){map=new google.maps.Map(element[0],config);gMContainer.addMap(id,map)}else throw"A map with id "+
id+" already exists. You must use"+" different ids for each instance of the googleMap directive.";return map};MapController.prototype._initDragListeners=function(){var self=this;this.addMapListener("dragstart",function(){self.dragging=true});this.addMapListener("idle",function(){self.dragging=false});this.addMapListener("drag",function(){self.dragging=true})};MapController.prototype._destroy=function(mapId){gMContainer.removeMap(mapId)};MapController.prototype.addMapListener=function(event,handler){google.maps.event.addListener(this._map,
event,handler)};MapController.prototype.addMapListenerOnce=function(event,handler){google.maps.event.addListenerOnce(this._map,event,handler)};MapController.prototype.addListener=function(object,event,handler){google.maps.event.addListener(object,event,handler)};MapController.prototype.addListenerOnce=function(object,event,handler){google.maps.event.addListenerOnce(object,event,handler)};MapController.prototype.mapTrigger=function(event){google.maps.event.trigger(this._map,event)};MapController.prototype.trigger=
function(object,event){google.maps.event.trigger(object,event)};MapController.prototype.addMarker=function(markerOptions){var opts={};angular.extend(opts,markerOptions);if(!(opts.position instanceof google.maps.LatLng))throw"markerOptions did not contain a position";var marker=new google.maps.Marker(opts);var position=marker.getPosition();if(this.hasMarker(position.lat(),position.lng()))return false;var hash=position.toUrlValue(this.precision);this._markers[hash]=marker;marker.setMap(this._map);return true};
MapController.prototype.hasMarker=function(lat,lng){return this.getMarker(lat,lng)instanceof google.maps.Marker};MapController.prototype.getMarker=function(lat,lng){if(lat==null||lng==null)throw"lat or lng was null";var latLng=new google.maps.LatLng(lat,lng);var hash=latLng.toUrlValue(this.precision);if(hash in this._markers)return this._markers[hash];else return null};MapController.prototype.removeMarker=function(lat,lng){if(lat==null||lng==null)throw"lat or lng was null";var latLng=new google.maps.LatLng(lat,
lng);var removed=false;var hash=latLng.toUrlValue(this.precision);var marker=this._markers[hash];if(marker){marker.setMap(null);removed=true}this._markers[hash]=null;return removed};MapController.prototype.fitToMarkers=function(){var bounds=new google.maps.LatLngBounds;this.forEachMarker(function(marker){bounds.extend(marker.getPosition())});this._map.fitBounds(bounds)};MapController.prototype.forEachMarker=function(fn){if(fn==null)throw"fn was null or undefined";angular.forEach(this._markers,function(marker,
hash){fn(marker)})};return{MapController:MapController}}])})();(function(){angular.module("google-maps").directive("gmMap",["$timeout","googleMapControllerFactory",function($timeout,googleMapControllerFactory){function link(scope,element,attrs,controller){if(!angular.isDefined(scope.gmCenter))scope.center={};if(!angular.isDefined(scope.gmBounds))scope.bounds={};if(!angular.isDefined(scope.gmMapId))throw"googleMap must have non-empty gmMapId attribute";var hasCenter=false;var hasZoom=false;var hasBounds=false;if(attrs.hasOwnProperty("gmCenter"))hasCenter=true;
if(attrs.hasOwnProperty("gmZoom"))hasZoom=true;if(attrs.hasOwnProperty("gmBounds"))hasBounds=true;var updateScope=function(){$timeout(function(){if(hasCenter||hasZoom||hasBounds)scope.$apply(function(s){if(hasCenter)scope.gmCenter=controller.center;if(hasZoom)scope.gmZoom=controller.zoom;if(hasBounds){var b=controller.bounds;if(b)scope.gmBounds=b}})})};controller.addMapListener("drag",updateScope);controller.addMapListener("zoom_changed",updateScope);controller.addMapListener("center_changed",updateScope);
controller.addMapListener("bounds_changed",updateScope);if(hasCenter)scope.$watch("gmCenter",function(newValue,oldValue){var changed=newValue!==oldValue;if(changed&&!controller.dragging){var latLng=newValue;if(latLng)controller.center=latLng}},true);if(hasZoom)scope.$watch("gmZoom",function(newValue,oldValue){var ok=newValue!=null&&!isNaN(newValue);if(ok&&newValue!==oldValue)controller.zoom=newValue});if(hasBounds)scope.$watch("gmBounds",function(newValue,oldValue){var changed=newValue!==oldValue;
if(changed&&!controller.dragging){var bounds=newValue;if(bounds)controller.bounds=bounds}})}return{restrict:"AE",priority:100,template:"<div>"+'<div id="" style="width:100%;height:100%;"></div>'+"<div ng-transclude></div>"+"</div>",transclude:true,replace:true,scope:{gmCenter:"=",gmZoom:"=",gmBounds:"=",gmMapOptions:"&",gmMapId:"&"},controller:googleMapControllerFactory.MapController,link:link}}])})();(function(){angular.module("google-maps").factory("googleMapsUtils",[function(){function floatEqual(f1,f2){return Math.abs(f1-f2)<1E-6}function latLngEqual(l1,l2){if(!(l1 instanceof google.maps.LatLng&&l2 instanceof google.maps.LatLng))return false;return floatEqual(l1.lat(),l2.lat())&&floatEqual(l1.lng(),l2.lng())}function boundsEqual(b1,b2){if(!(b1 instanceof google.maps.LatLngBounds&&b2 instanceof google.maps.LatLngBounds))return false;var sw1=b1.getSouthWest();var sw2=b2.getSouthWest();var ne1=
b1.getNorthEast();var ne2=b2.getNorthEast();return latLngEqual(sw1,sw2)&&latLngEqual(ne1,ne2)}function latLngToObj(latLng){if(!(latLng instanceof google.maps.LatLng))throw"latLng not a google.maps.LatLng";return{lat:latLng.lat(),lng:latLng.lng()}}function objToLatLng(obj){if(obj!=null){var lat=obj.lat;var lng=obj.lng;var ok=!(lat==null||lng==null)&&!(isNaN(lat)||isNaN(lng));if(ok)return new google.maps.LatLng(lat,lng)}return null}function hasNaN(latLng){if(!(latLng instanceof google.maps.LatLng))throw"latLng must be a google.maps.LatLng";
var isNull=latLng.lat()==null||latLng.lng()==null;var isNotaN=isNaN(latLng.lat())||isNaN(latLng.lng());return isNull||isNotaN}return{latLngEqual:latLngEqual,boundsEqual:boundsEqual,latLngToObj:latLngToObj,objToLatLng:objToLatLng,hasNaN:hasNaN}}])})();(function(){angular.module("google-maps").factory("googleMapsContainer",["$q",function($q){var maps={};var defers={};function addMap(mapId,map){if(!(map instanceof google.maps.Map))throw"map not a google.maps.Map: "+map;else if(mapId in maps)throw"already contain map with id "+mapId;maps[mapId]=map;if(mapId in defers)defers[mapId].resolve(map)}function getMap(mapId){return maps[mapId]}function getMapPromise(mapId){var defer=defers[mapId]||$q.defer();defers[mapId]=defer;return defer.promise}function removeMap(mapId){if(mapId in
maps)delete maps[mapId];if(mapId in defers)delete defers[mapId]}function clear(){maps={};defers={}}return{addMap:addMap,getMap:getMap,getMapPromise:getMapPromise,removeMap:removeMap,clear:clear}}])})();(function(){angular.module("hutmapServices",[]).factory("Huts",["$resource",function($resource){return $resource("/huts/api/v1/hut",{},{query:{method:"GET",params:{}}})}]).factory("Places",["$q",function($q){var elt=angular.element('<div id="google-attributions"></div>');var placesService=new google.maps.places.PlacesService(elt[0]);var autocompleteService=new google.maps.places.AutocompleteService;function callback(deferred,result,status){if(status==google.maps.places.PlacesServiceStatus.OK)deferred.resolve(result);
else deferred.reject(status)}function getDetails(reference){var deferred=$q.defer();placesService.getDetails({reference:reference},angular.bind(this,callback,deferred));return deferred.promise}function textSearch(request){var deferred=$q.defer();placesService.textSearch(request,angular.bind(this,callback,deferred));return deferred.promise}function getPlacePredictions(input){var deferred=$q.defer();autocompleteService.getPlacePredictions({input:input},angular.bind(this,callback,deferred));return deferred.promise}
return{getDetails:getDetails,textSearch:textSearch,getPlacePredictions:getPlacePredictions}}]).factory("utils",[function(){function latLngFromUrlValue(urlValue){var array=urlValue.split(",");return new google.maps.LatLng(array[0],array[1])}return{latLngFromUrlValue:latLngFromUrlValue}}])})();(function(){angular.module("hutmap").config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"/partials/home.html",activetab:"home"}).when("/map/",{templateUrl:"/partials/map.html",activetab:"map",reloadOnSearch:false}).when("/about/",{templateUrl:"/partials/about.html",activetab:"about"});$locationProvider.html5Mode(true)}]).constant("hutmapMapId","map_canvas").value("mapOptions",{zoom:3,center:new google.maps.LatLng(46.87916,-120),
mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:false}).value("markerOptions",{huts:{icon:"/static/img/marker_gray_small.png",shape:{coord:[6,0,2,2,0,6,6,13,12,6,10,2,6,0],type:"poly"},zIndex:0},selected:{icon:"/static/img/marker_blue.png",zIndex:1}})})();(function(){angular.module("hutmapFilters",[]).filter("truncate",function(){return function(text,length,end){if(isNaN(length))length=10;if(end===undefined)end="...";if(text==null||text.length==0)return null;else if(text.length<=length||text.length-end.length<=length)return text;else return String(text).substring(0,length-end.length)+end}})})();(function(){angular.module("hutmap.directives",[])})();(function(){angular.module("hutmap").controller("HutCtrl",["$scope","$location","Huts",function($scope,$location,Huts){$scope.huts;$scope.hutsMeta;$scope.query;$scope.selectedHut;$scope.setQuery=function(query){$scope.query=query};$scope.setSelectedHut=function(hut){$scope.selectedHut=hut};var doQuery=function(query){if(query){$scope.setLoading(true);var hutQuery=Huts.query(query,function(){$scope.huts=hutQuery.objects;$scope.hutsMeta=hutQuery.meta;$scope.setLoading(false)},function(error){$scope.setLoading(false)})}};
var updateLocation=function(query){if(query)angular.forEach(query,function(value,key){$location.search("h_"+key,value)})};var updateScope=function(){var search=$location.search();var newQuery={};var shouldUpdate=false;angular.forEach(search,function(value,key){if(key.lastIndexOf("h_",0)===0){key=key.substring(2);newQuery[key]=value;shouldUpdate=true}});if(shouldUpdate)$scope.query=newQuery};$scope.$watch("query",function(newQuery){if(newQuery!=null){doQuery(newQuery);updateLocation(newQuery)}});$scope.$watch("hutsMeta.total_count",
function(newValue){if(newValue)console.log(newValue)});updateScope()}])})();(function(){angular.module("hutmap").controller("HutmapCtrl",["$scope","$route","$location","$timeout","$log","googleMapsContainer",function($scope,$route,$location,$timeout,$log,googleMapsContainer){$scope.$route=$route;$scope.loading=false;$scope.setLoading=function(loading){$scope.loading=loading};$scope.alerts=[{type:"error",msg:"Oh snap! Change a few things up and try submitting again."},{type:"success",msg:"Well done! You successfully read this important alert message."}];$scope.addAlert=function(alert){$scope.alerts.push(alert)};
$scope.closeAlert=function(index){$scope.alerts.splice(index,1)}}]).controller("CarouselCtrl",["$scope","$route",function($scope,$route){$scope.carouselInterval=6E3;$scope.slides=[{title:"Big Hut",text:"lorem ipsum dolor",image:"https://mail-attachment.googleusercontent.com/attachment/u/0/?ui=2&ik=8768b5ed5b&view=att&th=13ba670d57d0c5f1&attid=0.3&disp=inline&realattid=f_haswzj3n2&safe=1&zw&saduie=AG9B_P9lJiRTwBR09D1jE4IKml8C&sadet=1363715869360&sads=7jqjo-uAUQ2mWgLwJ-5zPIGflA0"},{title:"Joe River Chickee",
text:"lorem ipsum dolor",image:"https://mail-attachment.googleusercontent.com/attachment/u/0/?ui=2&ik=8768b5ed5b&view=att&th=13ba670d57d0c5f1&attid=0.5&disp=inline&realattid=f_haswzj3u4&safe=1&zw&saduie=AG9B_P9lJiRTwBR09D1jE4IKml8C&sadet=1363715863132&sads=kmhkET9W_d5-f6HLhAIZpt5kx2U"},{title:"John Muir Shelter",text:"lorem ipsum dolor",image:"https://mail-attachment.googleusercontent.com/attachment/u/0/?ui=2&ik=8768b5ed5b&view=att&th=13ba670d57d0c5f1&attid=0.6&disp=inline&realattid=f_haswzj3v5&safe=1&zw&saduie=AG9B_P9lJiRTwBR09D1jE4IKml8C&sadet=1363715851827&sads=yGOzj2H_sDdau-G_UX0F2mW-MrE&sadssc=1"}]}]).controller("HutInfoCtrl",
["$scope",function($scope){$scope.accuracy_tooltip=["Coordinates provided, but unverifiable.","Wild ass guess.","Slightly better than a wild ass guess.","Found structure on satellite or topo map.","Surveyed with GPS by the Hutmap team.","Found on a map and surveyed by the Hutmap team."]}])})();(function(){angular.module("hutmap").controller("SearchCtrl",["$scope","$location","$route","$log","Places",function($scope,$location,$route,$log,Places){$scope.submitting=false;$scope.lastQuery;$scope.selected;$scope.getPlaces=function(query){$scope.lastQuery=query;if(query&&!$scope.submitting)return Places.getPlacePredictions(query).then(function(predictions){if(!$scope.submitting)return predictions;else return[]},function(status){return[]});else return[]};var onError=function(status){$scope.submitting=
false;$log.error(status);$scope.addAlert({type:"error",msg:"There was an error retrieving search results. TODO: better messages"})};var selectPlace=function(place){$scope.submitting=false;$route.reload();$location.path("/map/").search("m_selected",null).search("m_center",place.geometry.location.toUrlValue()).search("m_zoom",8);if(place.geometry.viewport)$location.search("h_bbox",place.geometry.viewport.toUrlValue())};$scope.$watch("selected",function(selected){if(selected)$scope.submit()});$scope.submit=
function(){if($scope.selected){$scope.submitting=true;var selected=$scope.selected;if(selected.reference)Places.getDetails(selected.reference).then(function(place){selectPlace(place)},onError)}else{var lastQuery=$scope.lastQuery;if(lastQuery){$scope.submitting=true;Places.getPlacePredictions(lastQuery).then(function(predictions){Places.getDetails(predictions[0].reference).then(function(place){selectPlace(place)},onError)},onError)}}}}])})();(function(){angular.module("hutmap").controller("MapCtrl",["$scope","$location","$timeout","$q","googleMapsContainer","hutmapMapId","mapOptions","markerOptions","utils",function($scope,$location,$timeout,$q,googleMapsContainer,hutmapMapId,mapOptions,markerOptions,utils){var gmapPromise=googleMapsContainer.getMapPromise(hutmapMapId);var scopeInitialized=$q.defer();var hutsInitialized=$q.defer();$scope.hutmapMapId=hutmapMapId;$scope.mapOptions=mapOptions;$scope.markerOptions=markerOptions;$scope.center;
$scope.zoom;$scope.bounds;$scope.hutMarkerEvent;var updateLocation=function(){if($scope.center)$location.search("m_center",$scope.center.toUrlValue());if($scope.zoom)$location.search("m_zoom",$scope.zoom);if($scope.selectedHut){var loc=$scope.selectedHut.location;$location.search("m_selected",loc.lat+","+loc.lng)}};var updateScope=function(){var center=$location.search().m_center;var zoom=$location.search().m_zoom;var selected=$location.search().m_selected;scopeInitialized.promise.then(function(){if(center!=
null)$scope.center=utils.latLngFromUrlValue(center);if(zoom!=null)$scope.zoom=Number(zoom)});hutsInitialized.promise.then(function(){if(selected!=null)$scope.hutMarkerEvent={event:"click",location:utils.latLngFromUrlValue(selected)}})};var valueChange=function(newValue,oldValue){if(newValue!==oldValue)updateLocation()};$scope.$watch("center != null && zoom != null",function(v){if(v)scopeInitialized.resolve()});$scope.$watch("huts != null",function(v){if(v)hutsInitialized.resolve()});$scope.$watch("center",
valueChange);$scope.$watch("zoom",valueChange);$scope.$watch("selectedHut",valueChange);$scope.selectHut=function(marker,hut){if($scope.prevSelectedMarker)$scope.prevSelectedMarker.setOptions(markerOptions.huts);$scope.prevSelectedMarker=marker;marker.setOptions(markerOptions.selected);$scope.setSelectedHut(hut)};gmapPromise.then(function(gmap){var getTile={};getTile.MSR_TOPO=function(point,zoom){var projection=gmap.getProjection();var h=Math.pow(2,zoom);var swPnt=new google.maps.Point(point.x*256/
h,(point.y+1)*256/h);var nePnt=new google.maps.Point((point.x+1)*256/h,point.y*256/h);var sw=projection.fromPointToLatLng(swPnt);var ne=projection.fromPointToLatLng(nePnt);var bbox=[sw.lng(),sw.lat(),ne.lng(),ne.lat()];var url="http://msrmaps.com/ogcmap.ashx?version=1.1.1&request=GetMap&Layers=drg&Styles=default&SRS=EPSG:4326&BBOX="+bbox.join(",")+"&width=256&height=256&format=image/jpeg";return url};getTile.ARC_GIS_USA=function(point,zoom){var c=1<<zoom,column=point.x%c;if(column<0)column+=c;var url=
"http://services.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/";return url+parseInt(zoom)+"/"+point.y+"/"+column};getTile.ARC_GIS_WORLD=function(point,zoom){var c=1<<zoom,column=point.x%c;if(column<0)column+=c;var url="http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/";return url+parseInt(zoom)+"/"+point.y+"/"+column};var mapTypes={MSR_TOPO:new google.maps.ImageMapType({name:"MSR USGS",alt:"USGS topos from Microsoft Research",minZoom:1,maxZoom:15,
tileSize:new google.maps.Size(256,256),isPng:false,getTileUrl:getTile.MSR_TOPO}),ARC_GIS_USA:new google.maps.ImageMapType({name:"ArcGIS USA",alt:"ArcGIS USA Topos",minZoom:1,maxZoom:15,tileSize:new google.maps.Size(256,256),isPng:true,getTileUrl:getTile.ARC_GIS_USA}),ARC_GIS_WORLD:new google.maps.ImageMapType({name:"ArcGIS World",alt:"ArcGIS World Topos",minZoom:1,maxZoom:15,tileSize:new google.maps.Size(256,256),isPng:true,getTileUrl:getTile.ARC_GIS_WORLD})};angular.forEach(mapTypes,function(mapType,
key){gmap.mapTypes.set(mapType.name,mapType)});gmap.setOptions({mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN,mapTypes.MSR_TOPO.name,mapTypes.ARC_GIS_USA.name,mapTypes.ARC_GIS_WORLD.name]}});gmap.enableKeyDragZoom({key:"alt",visualEnabled:true})});updateScope()}])})();
