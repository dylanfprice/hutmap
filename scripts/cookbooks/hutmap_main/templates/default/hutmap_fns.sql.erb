# Generated by Chef for <%= node['hostname'] %>.
# Local modifications will be overwritten.

USE hutmap;

DROP FUNCTION IF EXISTS `distance`

-- Switch delimiter so the ; will work in the function body
DELIMITER $$

-- Create the function
CREATE FUNCTION `distance`(a POINT, b POINT) RETURNS double 
  DETERMINISTIC 
  COMMENT 'Calculate the distance between two points' 
  BEGIN 
    RETURN glength(linestringFromwkb(linestring(geomfromtext(astext(a)),geomfromtext(astext(b)))));
  END$$

-- Switch the delimiter back to ;
DELIMITER ;


USE test_hutmap;

DROP FUNCTION IF EXISTS `distance`

-- Switch delimiter so the ; will work in the function body
DELIMITER $$

-- Create the function
CREATE FUNCTION `distance`(a POINT, b POINT) RETURNS double 
  DETERMINISTIC 
  COMMENT 'Calculate the distance between two points' 
  BEGIN 
    RETURN glength(linestringFromwkb(linestring(geomfromtext(astext(a)),geomfromtext(astext(b)))));
  END$$

-- Switch the delimiter back to ;
DELIMITER ;


