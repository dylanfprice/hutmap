---
- name: setup django development server as a service
  template: src='django-devserver.conf.j2' dest='/etc/init/django-devserver.conf'
  notify:
    restart webserver

- name: install deploy-dreamhost script
  template: src='deploy-dreamhost.sh.j2' dest='$scripts_dir/deploy-dreamhost.sh' mode=0755

- name: install libfontconfig which is needed by phantomjs
  apt: pkg=libfontconfig1 state=latest

- name: ensure add-apt-repository command
  apt: pkg=python-software-properties state=latest

- name: setup nodejs ppa
  apt_repository: repo='ppa:chris-lea/node.js'

- name: install nodejs
  apt: pkg=nodejs state=latest update_cache=yes

- name: install development tools
  npm: name=$item global=yes state=present
  with_items:
    - less
    - phantomjs
    - karma
    - karma-coverage
